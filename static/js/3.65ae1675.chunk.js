"use strict";(self.webpackChunkgamebook_creator=self.webpackChunkgamebook_creator||[]).push([[3],{38:function(e,n,t){t.d(n,{Z:function(){return l}});var i=t(4483),a=t(3174),r=t(184),l=function(e){var n=e.dead,t=e.fixed,l=e.ready,o=e.start,s=e.win;return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(i.G,{icon:a.zc,size:"sm",style:{marginRight:"10px"}}),t&&(0,r.jsx)(i.G,{icon:a.Lad,size:"sm",style:{marginRight:"10px"}}),n&&(0,r.jsx)(i.G,{icon:a.QmK,size:"sm",style:{marginRight:"10px"}}),s&&(0,r.jsx)(i.G,{icon:a.kWN,size:"sm",style:{marginRight:"10px"},color:"gold"}),l?(0,r.jsx)(i.G,{icon:a.fV7,size:"sm",style:{marginRight:"10px"},color:"green"}):(0,r.jsx)(i.G,{icon:a.WA2,size:"sm",style:{marginRight:"10px"},color:"red"})]})}},8278:function(e,n,t){t.d(n,{Z:function(){return L}});var i,a,r,l=t(9439),o=t(168),s=t(2791),c=t(6060),d=t(6031),u=t(6871),h=t(4483),m=t(3174),p=t(6697),f=t(8604),x=t(4165),b=t(5861),v=t(3272),g=t(3085),Z=t(280),j=t(3478),y=t(3099),k=t(7309),N=t(5868),C=t(184),T=d.ZP.div(i||(i=(0,o.Z)(["\n    // put some styles here\n"]))),E=function(e){var n=e.isVisible,t=e.setIsVisible,i=(0,p.T)(),a=(0,p.C)((function(e){return e.gamebook})),r=a.authorName,o=a.gamebookTitle,s=v.Z.useForm(),c=(0,l.Z)(s,1)[0],d=function(){var e=(0,b.Z)((0,x.Z)().mark((function e(n){var a,r;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.authorName,r=n.gamebookTitle,a.trim(),r.trim(),i((0,f._i)({authorName:a,gamebookTitle:r})),g.Z.success({message:"Metadata changed",description:"".concat(a,', creator of "').concat(r,'" saved.'),placement:"bottomRight"}),t(!1),c.resetFields();case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){c.resetFields(),t(!1)};return(0,C.jsx)(T,{children:(0,C.jsx)(Z.Z,{title:"View / Edit gamebook metadata",visible:n,footer:null,onCancel:u,children:(0,C.jsxs)(v.Z,{form:c,layout:"vertical",autoComplete:"off",requiredMark:"optional",onFinish:d,initialValues:{authorName:r,gamebookTitle:o},children:[(0,C.jsx)(v.Z.Item,{label:"Author's name",name:"authorName",rules:[{required:!0,message:"Please input author's name!"},{min:N.k.AUHOR_NAME_LENGTH_MIN,message:"Name min ".concat(N.k.AUHOR_NAME_LENGTH_MIN," chars!")},{max:N.k.AUHOR_NAME_LENGTH_MAX,message:"Name max ".concat(N.k.AUHOR_NAME_LENGTH_MAX," chars")}],children:(0,C.jsx)(j.Z,{placeholder:"ex. John Doe"})}),(0,C.jsx)(v.Z.Item,{label:"Title",name:"gamebookTitle",rules:[{required:!0,message:"Please input gamebook main title!"},{min:N.k.CHAPTER_TITLE_LENGTH_MIN,message:"Name min ".concat(N.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:N.k.CHAPTER_TITLE_LENGTH_MAX,message:"Name max ".concat(N.k.CHAPTER_TITLE_LENGTH_MAX," chars")}],children:(0,C.jsx)(j.Z,{placeholder:"ex. New Journey of Halflings"})}),(0,C.jsx)(v.Z.Item,{style:{textAlign:"end"},children:(0,C.jsxs)(y.Z,{size:"middle",children:[(0,C.jsx)(k.Z,{onClick:u,children:"Cancel"}),(0,C.jsx)(k.Z,{type:"primary",htmlType:"submit",children:"Submit"})]})})]})})})},_=t(8425),I=t(8190),w=t(3231),P=function(e){var n=e.gamebookTitle,t=e.authorName,i=e.chapters,a="".concat(n,"\n\n");return a+="by ".concat(t,"\n\n"),a+="=========================\n\n\n",i.forEach((function(e){a+="".concat(e.chapterNumber,"\n\n"),a+="".concat(e.content,"\n\n\n\n")})),a+="END"},A=d.ZP.div(a||(a=(0,o.Z)(["\n    // put some styles here\n"]))),M=function(e){var n=e.isVisible,t=e.setIsVisible,i=(0,p.C)((function(e){return e.gamebook})),a=i.gamebookTitle,r=i.authorName,o=i.chapters,c=v.Z.useForm(),d=(0,l.Z)(c,1)[0],u=s.useState("text/plain"),h=(0,l.Z)(u,2),m=h[0],f=(h[1],function(){var e=(0,b.Z)((0,x.Z)().mark((function e(n){var i,l,s,c;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="text/plain"===n.filetype?new Blob([P({gamebookTitle:a,authorName:r,chapters:o})],{type:"text/plain"}):new Blob([JSON.stringify({gamebookTitle:a,authorName:r,chapters:o})],{type:"application/json"}),l=window.URL.createObjectURL(i),s=a||"gamebook_file",(c=document.createElement("a")).download=s,c.innerHTML="Download File",c.href=l,c.onclick=function(e){document.body.removeChild(e.target)},c.style.display="none",document.body.appendChild(c),c.click(),g.Z.success({message:"Saving...",description:"File ".concat(s," by ").concat(r," saved."),placement:"bottomRight"}),t(!1);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),T=function(){d.resetFields(),t(!1)};return(0,C.jsx)(A,{children:(0,C.jsx)(Z.Z,{title:"Export to file",visible:n,footer:null,onCancel:T,children:(0,C.jsxs)(v.Z,{form:d,layout:"vertical",autoComplete:"off",requiredMark:!1,onFinish:f,initialValues:{gamebookTitle:a,filetype:m},children:[(0,C.jsx)(v.Z.Item,{label:"Filename",name:"gamebookTitle",rules:[{required:!0,message:"Please input file's name!"},{min:N.k.FILE_NAME_LENGTH_MIN,message:"Filename min ".concat(N.k.FILE_NAME_LENGTH_MIN," chars!")},{max:N.k.FILE_NAME_LENGTH_MAX,message:"Filename max ".concat(N.k.FILE_NAME_LENGTH_MAX," chars")}],children:(0,C.jsx)(j.Z,{placeholder:"ex. ".concat(a)})}),(0,C.jsx)(v.Z.Item,{label:"Filetype",name:"filetype",children:(0,C.jsxs)(w.ZP.Group,{children:[(0,C.jsx)(w.ZP,{value:"text/plain",children:"txt"}),(0,C.jsx)(w.ZP,{value:"application/json",children:"json"})]})}),(0,C.jsx)(v.Z.Item,{style:{textAlign:"end"},children:(0,C.jsxs)(y.Z,{size:"middle",children:[(0,C.jsx)(k.Z,{onClick:T,children:"Cancel"}),(0,C.jsx)(k.Z,{type:"primary",htmlType:"submit",children:"Submit"})]})})]})})})},O=d.ZP.div(r||(r=(0,o.Z)(["\n    // put some styles here\n"]))),H=[{label:"File",key:"File",disabled:!1,children:[{label:"New book",key:"newBook",icon:(0,C.jsx)(h.G,{icon:m.FL8}),disabled:!0},{label:"Oper existing",key:"openExisting",icon:(0,C.jsx)(h.G,{icon:m.cC_}),disabled:!0},{label:"Export",key:"exportBook",disabled:!1,icon:(0,C.jsx)(h.G,{icon:m.EdJ})}]},{label:"Book",key:"bookOptions",children:[{label:"Add new chapter",key:"addNewChapter",icon:(0,C.jsx)(h.G,{icon:m.b7h})},{label:"Schuffle chapters",key:"schuffleChapters",disabled:!1,icon:(0,C.jsx)(h.G,{icon:m.RJo})},{label:"Introduction",key:"introduction",disabled:!0,icon:(0,C.jsx)(h.G,{icon:m.rxY})},{label:"Metadata",key:"metadata",disabled:!1,icon:(0,C.jsx)(h.G,{icon:m.ZWV})},{label:"Statistics",key:"bookStatistics",disabled:!0,icon:(0,C.jsx)(h.G,{icon:m.OS1})}]},{label:"Html Preview",key:"previewBook",disabled:!1},{label:"Play",key:"playBook",disabled:!1},{label:"Graph",key:"graphBook",disabled:!0},{label:"About",key:"aboutApp",disabled:!0,children:[{label:"Help",key:"appHelp",disabled:!0,icon:(0,C.jsx)(h.G,{icon:m.w49})}]},{label:"DropDB",key:"dropDB",disabled:!0,danger:!0}],L=function(){var e=(0,u.s0)(),n=(0,p.T)(),t=s.useState(""),i=(0,l.Z)(t,2),a=i[0],r=i[1],o=s.useState(!1),d=(0,l.Z)(o,2),h=d[0],m=d[1],x=s.useState(!1),b=(0,l.Z)(x,2),v=b[0],g=b[1],Z=s.useState(!1),j=(0,l.Z)(Z,2),y=j[0],k=j[1],N=s.useState(!1),T=(0,l.Z)(N,2),w=T[0],P=T[1];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(O,{children:(0,C.jsx)(c.Z,{onClick:function(t){switch(r(t.key),t.key){case"addNewChapter":g(!0);break;case"metadata":m(!0);break;case"schuffleChapters":k(!0);break;case"exportBook":P(!0);break;case"previewBook":e("/preview");break;case"playBook":e("/play");break;case"dropDB":n((0,f.bQ)()),e("/")}},selectedKeys:[a],mode:"horizontal",items:H})}),(0,C.jsx)(E,{isVisible:h,setIsVisible:m}),(0,C.jsx)(I.Z,{isVisible:v,setIsVisible:g}),(0,C.jsx)(_.Z,{isVisible:y,setIsVisible:k}),(0,C.jsx)(M,{isVisible:w,setIsVisible:P})]})}},8190:function(e,n,t){t.d(n,{Z:function(){return b}});var i,a=t(9439),r=t(168),l=t(3272),o=t(3085),s=t(280),c=t(3478),d=t(7309),u=(t(2791),t(6031)),h=t(6697),m=t(8604),p=t(5868),f=t(184),x=u.ZP.div(i||(i=(0,r.Z)(["\n    // put some styles here\n"]))),b=function(e){var n=e.isVisible,t=e.setIsVisible,i=l.Z.useForm(),r=(0,a.Z)(i,1)[0],u=(0,h.T)();return(0,f.jsx)(x,{children:(0,f.jsx)(s.Z,{title:"Create new Chapter",visible:n,onCancel:function(){t(!1)},footer:null,width:700,children:(0,f.jsxs)(l.Z,{form:r,autoComplete:"off",layout:"vertical",requiredMark:"optional",size:"large",onFinish:function(e){u((0,m.Xi)(e.title)),o.Z.success({message:"Chapter created",description:'Chapter "'.concat(e.title,"\" created. You can select it in chapter's tree on the left to edit it's content."),placement:"bottomRight",duration:3}),r.resetFields(),t(!1)},initialValues:{title:"New chapter very new title"},children:[(0,f.jsx)(l.Z.Item,{name:"title",rules:[{required:!0,message:"Enter the title!"},{min:p.k.CHAPTER_TITLE_LENGTH_MIN,message:"Min length ".concat(p.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:p.k.CHAPTER_TITLE_LENGTH_MAX,message:"Max length ".concat(p.k.CHAPTER_TITLE_LENGTH_MAX," chars!")}],children:(0,f.jsx)(c.Z,{placeholder:"ex. Entering dungeon's kitchen"})}),(0,f.jsx)(l.Z.Item,{style:{textAlign:"end"},children:(0,f.jsx)(d.Z,{htmlType:"submit",children:"Create chapter"})})]})})})}},8425:function(e,n,t){t.d(n,{Z:function(){return x}});var i,a=t(168),r=t(9964),l=t(3085),o=t(280),s=t(3099),c=t(7309),d=(t(2791),t(8604)),u=t(6697),h=t(6031),m=t(184),p=h.ZP.div(i||(i=(0,a.Z)(["\n    // put some styles here\n"]))),f=r.Z.Text,x=function(e){var n=e.isVisible,t=e.setIsVisible,i=(0,u.T)(),a=function(){t(!1)};return(0,m.jsx)(p,{children:(0,m.jsxs)(o.Z,{title:"Schuffle chapters",visible:n,onCancel:a,footer:null,children:[(0,m.jsx)(f,{children:"Do you really want to shuffle chapters?"}),(0,m.jsx)("div",{style:{textAlign:"end"},children:(0,m.jsxs)(s.Z,{size:"middle",children:[(0,m.jsx)(c.Z,{onClick:a,children:"Cancel"}),(0,m.jsx)(c.Z,{onClick:function(){i((0,d.FE)()),l.Z.success({message:"Shuffled chapters",description:"Chapters shuffled.",placement:"bottomRight"}),t(!1)},style:{color:"#fa8c16",borderColor:"#fa8c16"},children:"Shuffle"})]})})]})})}},3:function(e,n,t){t.r(n),t.d(n,{default:function(){return ge}});var i,a=t(168),r=t(6106),l=t(914),o=t(2791),s=t(6031),c=t(1413),d=t(9439),u=t(9964),h=t(3478),m=t(7309),p=t(6697),f=t(8604),x=t(38),b=t(4483),v=t(3174),g=t(8190),Z=t(184),j=u.Z.Text,y=s.ZP.div(i||(i=(0,a.Z)(["\n    // put some styles here\n    height: 100%;\n    padding: 10px;\n\n    .tree-list {\n        overflow-y: auto;\n        height: calc(100% - 100px);\n        border: 1px solid #444;\n        margin: 10px 0;\n        list-style-type: none;\n        padding-left: 15px;\n        li {\n            width: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            font-size: 1.2rem;\n            color: #bbb;\n            margin: 10px 0px;\n            padding: 5px 0;\n            &:hover {\n                background-color: #222;\n                cursor: pointer;\n            }\n        }\n        &_selected {\n            background-color: #333;\n        }\n    }\n"]))),k=function(){var e=(0,p.C)((function(e){return e.gamebook})),n=e.chapters,t=e.selectedId,i=o.useState(t),a=(0,d.Z)(i,2),r=(a[0],a[1]),l=o.useState(""),s=(0,d.Z)(l,2),u=s[0],k=s[1],N=o.useState(!1),C=(0,d.Z)(N,2),T=C[0],E=C[1],_=(0,p.T)();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(y,{children:[(0,Z.jsx)(h.Z,{placeholder:"Filter paragraphs by title or number",size:"large",allowClear:!0,value:u,onChange:function(e){k(e.target.value)}}),(0,Z.jsx)("ul",{className:"tree-list",children:n.filter((function(e){return u.split(" ").some((function(n){return e.title.toLowerCase().trim().includes(n.toLowerCase().trim())||parseInt(n.trim())===e.chapterNumber}))})).map((function(e,n){return(0,Z.jsxs)("li",{className:"tree-list_chapter ".concat(e.id===t?"tree-list_selected":""),onClick:function(){return n=e.id,r(n),void _((0,f.kC)(n));var n},children:[(0,Z.jsx)(j,{children:"".concat(e.chapterNumber,") ").concat(e.title.length>25?e.title.slice(0,25)+"...":e.title)}),(0,Z.jsx)("div",{children:(null===e||void 0===e?void 0:e.status)&&(0,Z.jsx)(x.Z,(0,c.Z)({},e.status))})]},e.id)}))}),(0,Z.jsxs)(m.Z,{block:!0,size:"large",onClick:function(){E(!0)},children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.b7h})," ","New chapter"]}),(0,Z.jsx)(g.Z,{isVisible:T,setIsVisible:E})]})})},N=t(3272),C=t(7462),T=t(4942),E=t(1694),_=t.n(E),I=t(3785),w=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(t[i[a]]=e[i[a]])}return t},P=function(e){var n,t=o.useContext(I.E_),i=t.getPrefixCls,a=t.direction,r=e.prefixCls,l=e.type,s=void 0===l?"horizontal":l,c=e.orientation,d=void 0===c?"center":c,u=e.orientationMargin,h=e.className,m=e.children,p=e.dashed,f=e.plain,x=w(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),b=i("divider",r),v=d.length>0?"-".concat(d):d,g=!!m,Z="left"===d&&null!=u,j="right"===d&&null!=u,y=_()(b,"".concat(b,"-").concat(s),(n={},(0,T.Z)(n,"".concat(b,"-with-text"),g),(0,T.Z)(n,"".concat(b,"-with-text").concat(v),g),(0,T.Z)(n,"".concat(b,"-dashed"),!!p),(0,T.Z)(n,"".concat(b,"-plain"),!!f),(0,T.Z)(n,"".concat(b,"-rtl"),"rtl"===a),(0,T.Z)(n,"".concat(b,"-no-default-orientation-margin-left"),Z),(0,T.Z)(n,"".concat(b,"-no-default-orientation-margin-right"),j),n),h),k=(0,C.Z)((0,C.Z)({},Z&&{marginLeft:u}),j&&{marginRight:u});return o.createElement("div",(0,C.Z)({className:y},x,{role:"separator"}),m&&o.createElement("span",{className:"".concat(b,"-inner-text"),style:k},m))},A=t(8083),M=t(1940),O=t(3433),H=t(1818),L=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(t[i[a]]=e[i[a]])}return t},G=o.createContext(null),R=function(e,n){var t=e.defaultValue,i=e.children,a=e.options,r=void 0===a?[]:a,l=e.prefixCls,s=e.className,c=e.style,u=e.onChange,h=L(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),m=o.useContext(I.E_),p=m.getPrefixCls,f=m.direction,x=o.useState(h.value||t||[]),b=(0,d.Z)(x,2),v=b[0],g=b[1],Z=o.useState([]),j=(0,d.Z)(Z,2),y=j[0],k=j[1];o.useEffect((function(){"value"in h&&g(h.value||[])}),[h.value]);var N=function(){return r.map((function(e){return"string"===typeof e||"number"===typeof e?{label:e,value:e}:e}))},E=p("checkbox",l),w="".concat(E,"-group"),P=(0,H.Z)(h,["value","disabled"]);r&&r.length>0&&(i=N().map((function(e){return o.createElement(B,{prefixCls:E,key:e.value.toString(),disabled:"disabled"in e?e.disabled:h.disabled,value:e.value,checked:-1!==v.indexOf(e.value),onChange:e.onChange,className:"".concat(w,"-item"),style:e.style},e.label)})));var A={toggleOption:function(e){var n=v.indexOf(e.value),t=(0,O.Z)(v);-1===n?t.push(e.value):t.splice(n,1),"value"in h||g(t);var i=N();null===u||void 0===u||u(t.filter((function(e){return-1!==y.indexOf(e)})).sort((function(e,n){return i.findIndex((function(n){return n.value===e}))-i.findIndex((function(e){return e.value===n}))})))},value:v,disabled:h.disabled,name:h.name,registerValue:function(e){k((function(n){return[].concat((0,O.Z)(n),[e])}))},cancelValue:function(e){k((function(n){return n.filter((function(n){return n!==e}))}))}},M=_()(w,(0,T.Z)({},"".concat(w,"-rtl"),"rtl"===f),s);return o.createElement("div",(0,C.Z)({className:M,style:c},P,{ref:n}),o.createElement(G.Provider,{value:A},i))},F=o.forwardRef(R),V=o.memo(F),S=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(t[i[a]]=e[i[a]])}return t},z=function(e,n){var t,i=e.prefixCls,a=e.className,r=e.children,l=e.indeterminate,s=void 0!==l&&l,c=e.style,d=e.onMouseEnter,u=e.onMouseLeave,h=e.skipGroup,m=void 0!==h&&h,p=S(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),f=o.useContext(I.E_),x=f.getPrefixCls,b=f.direction,v=o.useContext(G),g=(0,o.useContext)(M.aM).isFormItemInput,Z=o.useRef(p.value);o.useEffect((function(){null===v||void 0===v||v.registerValue(p.value)}),[]),o.useEffect((function(){if(!m)return p.value!==Z.current&&(null===v||void 0===v||v.cancelValue(Z.current),null===v||void 0===v||v.registerValue(p.value),Z.current=p.value),function(){return null===v||void 0===v?void 0:v.cancelValue(p.value)}}),[p.value]);var j=x("checkbox",i),y=(0,C.Z)({},p);v&&!m&&(y.onChange=function(){p.onChange&&p.onChange.apply(p,arguments),v.toggleOption&&v.toggleOption({label:r,value:p.value})},y.name=v.name,y.checked=-1!==v.value.indexOf(p.value),y.disabled=p.disabled||v.disabled);var k=_()((t={},(0,T.Z)(t,"".concat(j,"-wrapper"),!0),(0,T.Z)(t,"".concat(j,"-rtl"),"rtl"===b),(0,T.Z)(t,"".concat(j,"-wrapper-checked"),y.checked),(0,T.Z)(t,"".concat(j,"-wrapper-disabled"),y.disabled),(0,T.Z)(t,"".concat(j,"-wrapper-in-form-item"),g),t),a),N=_()((0,T.Z)({},"".concat(j,"-indeterminate"),s)),E=s?"mixed":void 0;return o.createElement("label",{className:k,style:c,onMouseEnter:d,onMouseLeave:u},o.createElement(A.Z,(0,C.Z)({"aria-checked":E},y,{prefixCls:j,className:N,ref:n})),void 0!==r&&o.createElement("span",null,r))},D=o.forwardRef(z);D.displayName="Checkbox";var B=D,X=B;X.Group=V,X.__ANT_CHECKBOX=!0;var Y,q,W,U,J,K=X,Q=t(3099),$=t(8529),ee=t(3085),ne=t(280),te=t(5868),ie=s.ZP.div(Y||(Y=(0,a.Z)(["\n    // put some styles here\n"]))),ae=u.Z.Text,re=function(e){var n=e.isVisible,t=e.setIsVisible,i=(0,p.C)((function(e){return e.gamebook})),a=i.selectedId,r=i.chapters,l=o.useState(void 0),s=(0,d.Z)(l,2),c=s[0],u=s[1],h=(0,p.T)();o.useEffect((function(){u(r.find((function(e){return e.id===a})))}),[a]);var x=function(){t(!1)};return(0,Z.jsx)(ie,{children:(0,Z.jsx)(ne.Z,{title:"Delete chapter",visible:n,onCancel:x,footer:null,children:a===te.k.FIRST_CHAPTER_ID?(0,Z.jsxs)(Z.Fragment,{children:["You can't delete chapter:"," ",(0,Z.jsxs)(ae,{style:{fontWeight:"bold",color:"#096dd9"},children:[null===c||void 0===c?void 0:c.chapterNumber,") ",null===c||void 0===c?void 0:c.title.slice(0,20),"..."]}),(0,Z.jsx)("p",{children:"The very first chapter can't be deleted. It only can be edited."}),(0,Z.jsx)(P,{}),(0,Z.jsx)("div",{style:{textAlign:"end"},children:(0,Z.jsx)(Q.Z,{size:"middle",children:(0,Z.jsx)(m.Z,{onClick:x,children:"Cancel"})})})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(ae,{children:"Do you really want to delete chapter: "}),(0,Z.jsxs)(ae,{style:{fontWeight:"bold"},children:[null===c||void 0===c?void 0:c.chapterNumber,") ",null===c||void 0===c?void 0:c.title.slice(0,20),"..."]}),(0,Z.jsxs)(ae,{type:"warning",children:["It can create some tree issues! All links to"," ",null===c||void 0===c?void 0:c.chapterNumber," become empty "," ","links."]}),(0,Z.jsx)("div",{style:{textAlign:"end"},children:(0,Z.jsxs)(Q.Z,{size:"middle",children:[(0,Z.jsx)(m.Z,{onClick:x,children:"Cancel"}),(0,Z.jsx)(m.Z,{danger:!0,onClick:function(){c&&h((0,f.Gv)(c)),ee.Z.success({message:"Deleted chapter",description:"Chapter deleted.",placement:"bottomRight"}),t(!1)},children:"Delete"})]})})]})})})},le=t(8425),oe=s.ZP.div(q||(q=(0,a.Z)(["\n    // put some styles here\n    display: flex;\n    justify-content: space-between;\n"]))),se=function(){var e=(0,p.C)((function(e){return e.gamebook})),n=e.selectedId,t=(e.chapters,(0,p.T)(),o.useState(!1)),i=(0,d.Z)(t,2),a=i[0],r=i[1],l=o.useState(!1),s=(0,d.Z)(l,2),c=s[0],u=s[1],h=o.useState(!1),f=(0,d.Z)(h,2),x=f[0],j=f[1];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(oe,{children:[(0,Z.jsxs)(Q.Z,{direction:"horizontal",children:[(0,Z.jsx)($.Z,{title:"Create new chapter",children:(0,Z.jsxs)(m.Z,{size:"large",onClick:function(){r(!0)},children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.b7h})," ","New chapter"]})}),(0,Z.jsx)($.Z,{title:"Shuffle chapters",children:(0,Z.jsxs)(m.Z,{size:"large",onClick:function(){j(!0)},children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.RJo})," ","Shuffle"]})})]}),(0,Z.jsx)($.Z,{title:"Delete chapter",style:{marginLeft:"auto"},children:(0,Z.jsxs)(m.Z,{size:"large",danger:!0,onClick:function(){u(!0)},disabled:!n,children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.$aW})," ","Delete"]})})]}),(0,Z.jsx)(g.Z,{isVisible:a,setIsVisible:r}),(0,Z.jsx)(re,{isVisible:c,setIsVisible:u}),(0,Z.jsx)(le.Z,{isVisible:x,setIsVisible:j})]})},ce=s.ZP.div(W||(W=(0,a.Z)(["\n    // put some styles here\n    height: 100%;\n    textarea {\n        width: 100%;\n        height: calc(80vh - 155px);\n        padding: 12px 20px;\n        font-size: 1.2rem;\n        resize: none;\n    }\n"]))),de=function(){var e=o.useState(void 0),n=(0,d.Z)(e,2),t=n[0],i=n[1],a=(0,p.T)(),s=(0,p.C)((function(e){return e.gamebook})),u=s.chapters,x=s.selectedId,g=N.Z.useForm(),j=(0,d.Z)(g,1)[0];o.useEffect((function(){var e,n,t,a,r,l,o,s,c,d,h,m,p,f;x?(e=u.find((function(e){return e.id===x})),j.setFieldsValue({id:null===(n=e)||void 0===n?void 0:n.id,chapterNumber:null===(t=e)||void 0===t?void 0:t.chapterNumber,title:null===(a=e)||void 0===a?void 0:a.title,content:null===(r=e)||void 0===r?void 0:r.content,win:null===(l=e)||void 0===l||null===(o=l.status)||void 0===o?void 0:o.win,dead:null===(s=e)||void 0===s||null===(c=s.status)||void 0===c?void 0:c.dead,fixed:null===(d=e)||void 0===d||null===(h=d.status)||void 0===h?void 0:h.fixed,ready:null===(m=e)||void 0===m||null===(p=m.status)||void 0===p?void 0:p.ready}),i(null===(f=e)||void 0===f?void 0:f.chapterNumber)):(i(void 0),j.resetFields())}),[x]);return(0,Z.jsxs)(ce,{children:[(0,Z.jsx)(se,{}),(0,Z.jsx)(P,{}),(0,Z.jsxs)(N.Z,{form:j,autoComplete:"off",size:"large",onFinish:function(e){if(x){var n=u.find((function(e){return e.id===x}));n&&a((0,f.rY)((0,c.Z)((0,c.Z)({},n),{},{title:e.title,content:e.content,status:(0,c.Z)((0,c.Z)({},n.status),{},{fixed:e.fixed,dead:e.dead,win:e.win,ready:e.ready})})))}else a((0,f.Gd)({id:"",title:e.title,content:e.content,status:{fixed:e.fixed,dead:e.dead,win:e.win,ready:e.ready}}))},children:[(0,Z.jsxs)(r.Z,{children:[(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(N.Z.Item,{name:"chapterNumber",hidden:!0,children:(0,Z.jsx)(h.Z,{})})}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(N.Z.Item,{name:"id",hidden:!0,children:(0,Z.jsx)(h.Z,{})})})]}),(0,Z.jsx)(N.Z.Item,{name:"title",rules:[{required:!0,message:"Title can't be empty!"},{min:te.k.CHAPTER_TITLE_LENGTH_MIN,message:"Min length ".concat(te.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:te.k.CHAPTER_TITLE_LENGTH_MAX,message:"Max length ".concat(te.k.CHAPTER_TITLE_LENGTH_MAX," chars!")}],children:(0,Z.jsx)(h.Z,{addonBefore:t,placeholder:"Title"})}),(0,Z.jsxs)(r.Z,{gutter:16,children:[(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(N.Z.Item,{name:"win",valuePropName:"checked",children:(0,Z.jsxs)(K,{onChange:function(){},children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.kWN})," ","Victory!"]})})}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(N.Z.Item,{name:"dead",valuePropName:"checked",children:(0,Z.jsxs)(K,{onChange:function(){},value:"Dead ending",children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.QmK})," ","Death"]})})}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(N.Z.Item,{name:"fixed",valuePropName:"checked",children:(0,Z.jsxs)(K,{onChange:function(){},value:"Fixed chapter",disabled:x===te.k.FIRST_CHAPTER_ID,children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.Lad})," ","Is fixed"]})})}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(N.Z.Item,{name:"ready",valuePropName:"checked",children:(0,Z.jsxs)(K,{onChange:function(){},value:"Fixed chapter",children:[(0,Z.jsx)(b.G,{className:"faIcon",icon:v.fV7})," ","Is ready"]})})})]}),(0,Z.jsx)(N.Z.Item,{name:"content",children:(0,Z.jsx)(h.Z.TextArea,{placeholder:x?"Write chapter's content here. Use {} to create links to other chapters.":'Create a new chapter using the "New Chapter" buttons or just start writing.'})}),(0,Z.jsx)(N.Z.Item,{children:x?(0,Z.jsx)(m.Z,{htmlType:"submit",block:!0,children:"Save"}):(0,Z.jsx)(m.Z,{htmlType:"submit",block:!0,children:"Create new"})})]})]})},ue=t(2810),he=t(6015),me=s.ZP.div(U||(U=(0,a.Z)(["\n    // put some styles here\n    height: 50%;\n    padding: 10px;\n    .graph-container {\n        background-color: #222;\n        height: 100%;\n        border: 1px solid #444;\n    }\n"]))),pe={nodes:[],edges:[]},fe={layout:{hierarchical:!1,randomSeed:741},edges:{color:"#FFFFFF",smooth:!0,length:200},nodes:{shape:"box"},height:"100%",width:"100%"},xe=function(){var e=(0,p.C)((function(e){return e.gamebook})),n=e.chapters,t=e.selectedId,i=o.useState(pe),a=(0,d.Z)(i,2),r=a[0],l=a[1],s=(0,p.T)();o.useEffect((function(){n.map((function(e){return e.id}));var e=n.filter((function(e){return e.id===t})),i=[],a=[];if(e.length>0){var r,o,s;i=[].concat((0,O.Z)(i),[{id:e[0].id,label:"".concat(e[0].chapterNumber,"\n").concat(e[0].title.slice(0,10)),color:"#0050b3",font:{color:"white"}}]),null!==(r=e[0].content)&&void 0!==r&&r.includes("{}")&&(i=[].concat((0,O.Z)(i),[{id:"EMPTY_".concat(e[0].id),label:"{ EMPTY LINK }",color:"#fff1b8"}]),a=[].concat((0,O.Z)(a),[{from:e[0].id,to:"EMPTY_".concat(e[0].id)}]));var c=null===(o=e[0].content)||void 0===o||null===(s=o.match(/(\d+)/g))||void 0===s?void 0:s.map((function(e){return parseInt(e)}));c&&(null===c||void 0===c?void 0:c.length)>0&&(null===c||void 0===c||c.map((function(t){var r,l,o;t>0&&t<=n.length&&(i.push({id:n[t-1].id,label:"".concat(n[t-1].chapterNumber,"\n").concat(n[t-1].title.slice(0,10)),color:"#1890ff"}),a.push({from:e[0].id,to:n[t-1].id})),t>n.length&&(i.push({id:"NO_CHAPTER_".concat(e[0].id),label:"NO CHAPTER",title:"NO CHAPTER",color:"#ff7875"}),a.push({from:e[0].id,to:"NO_CHAPTER_".concat(e[0].id),label:"".concat(t)}));var s,c=null===(r=n[t-1])||void 0===r||null===(l=r.content)||void 0===l||null===(o=l.match(/(\d+)/g))||void 0===o?void 0:o.map((function(e){return parseInt(e)}));c&&c.length>0&&(null===c||void 0===c||c.map((function(e){return e>0&&e<=n.length&&(i.push({id:n[e-1].id,label:"".concat(n[e-1].chapterNumber,"\n").concat(n[e-1].title.slice(0,10)),color:"#bae7ff"}),a.push({from:n[t-1].id,to:n[e-1].id})),e>n.length&&(i.push({id:"NO_CHAPTER_".concat(n[t-1].id),label:"NO CHAPTER",title:"NO CHAPTER",color:"#ff7875"}),a.push({from:n[t-1].id,to:"NO_CHAPTER_".concat(n[t-1].id),label:"".concat(e)})),null})),null!==(s=n[t-1].content)&&void 0!==s&&s.includes("{}")&&(i=[].concat((0,O.Z)(i),[{id:"EMPTY_".concat(n[t-1].id),label:"{ EMPTY LINK }",color:"#fff1b8"}]),a=[].concat((0,O.Z)(a),[{from:n[t-1].id,to:"EMPTY_".concat(n[t-1].id)}])));return null})));var d=i.map((function(e){return e.id}));i=i.filter((function(e,n){var t=e.id;return!d.includes(t,n+1)}))}l({nodes:(0,O.Z)(i),edges:(0,O.Z)(a)})}),[n,t]);var c={select:function(e){var n=e.nodes;e.edges;1===n.length&&s((0,f.kC)(n[0]))}};return(0,Z.jsx)(me,{children:(0,Z.jsx)("div",{className:"graph-container",children:(0,Z.jsx)(he.Z,{graph:r,options:fe,events:c},(0,ue.Z)())})})},be=t(8278),ve=s.ZP.div(J||(J=(0,a.Z)(["\n    height: 100vh;\n    .editor-page_container {\n        height: calc(100% - 46px);\n    }\n    .sidebar__tree-container {\n        width: 25%;\n        min-width: 400px;\n        height: 100%;\n        overflow-y: hidden;\n    }\n    .editor-container {\n        padding: 10px;\n        width: 50%;\n        height: 100%;\n    }\n    .graph__tree-container {\n        width: 25%;\n        height: 100%;\n    }\n"]))),ge=function(e){Object.assign({},e);var n=(0,p.T)();return o.useEffect((function(){return n((0,f.qI)()),function(){}}),[]),(0,Z.jsxs)(ve,{children:[(0,Z.jsx)(be.Z,{}),(0,Z.jsxs)(r.Z,{className:"editor-page_container",children:[(0,Z.jsx)(l.Z,{className:"sidebar__tree-container",xs:{span:24,order:2},md:{span:12,order:2},lg:{span:10,order:1},xl:{span:6,order:1},children:(0,Z.jsx)(k,{})}),(0,Z.jsx)(l.Z,{className:"editor-container",xs:{span:24,order:1},md:{span:24,order:1},lg:{span:14,order:2},xl:{span:12,order:2},children:(0,Z.jsx)(de,{})}),(0,Z.jsx)(l.Z,{className:"graph__tree-container",xs:{span:24,order:3},md:{span:12,order:3},lg:{span:24,order:3},xl:{span:6,order:3},children:(0,Z.jsx)(xe,{})})]})]})}},6697:function(e,n,t){t.d(n,{C:function(){return r},T:function(){return a}});var i=t(9434),a=function(){return(0,i.I0)()},r=i.v9}}]);
//# sourceMappingURL=3.65ae1675.chunk.js.map