"use strict";(self.webpackChunkgamebook_creator=self.webpackChunkgamebook_creator||[]).push([[211],{1668:function(e,t,n){n.d(t,{Z:function(){return H}});var i,s,l=n(9439),o=n(168),a=n(2791),r=n(6060),c=n(6031),d=n(6871),h=n(4483),u=n(3174),p=n(9964),b=n(3085),x=n(280),f=n(6106),m=n(914),k=n(3099),Z=n(7309),g=n(62),j=n(6697),y=n(5262),v=n(184),C=p.Z.Paragraph,T=p.Z.Title,E=c.ZP.div(i||(i=(0,o.Z)(["\n    // put some styles here\n"]))),w=function(e){var t=e.isVisible,n=e.setIsVisible,i=(0,j.T)(),s=(0,j.C)((function(e){return e.gamebook})),o=s.authorName,r=s.gamebookTitle,c=a.useState(o),d=(0,l.Z)(c,2),h=d[0],u=d[1],p=a.useState(r),w=(0,l.Z)(p,2),_=w[0],N=w[1],P=function(){n(!1)};return(0,v.jsx)(E,{children:(0,v.jsxs)(x.Z,{title:"View / Edit gamebook metadata",visible:t,footer:null,onCancel:P,children:[(0,v.jsx)(T,{level:5,children:"Author"}),(0,v.jsx)(C,{editable:{icon:(0,v.jsx)(g.Z,{}),tooltip:"click to edit text",onChange:u},children:h}),(0,v.jsx)(T,{level:5,children:"Title"}),(0,v.jsx)(C,{editable:{icon:(0,v.jsx)(g.Z,{}),tooltip:"click to edit text",onChange:N},children:_}),(0,v.jsx)(f.Z,{children:(0,v.jsx)(m.Z,{span:24,style:{display:"flex",justifyContent:"end"},children:(0,v.jsxs)(k.Z,{direction:"horizontal",size:"large",children:[(0,v.jsx)(Z.Z,{onClick:P,children:"Cancel"}),(0,v.jsx)(Z.Z,{type:"primary",onClick:function(){i((0,y.y2)(h)),i((0,y.K2)(_)),b.Z.success({message:"Metadata changed",description:"".concat(h,', creator of "').concat(_,'" saved.'),placement:"bottomRight"}),n(!1)},children:"Save"})]})})})]})})},_=n(8190),N=n(8425),P=c.ZP.div(s||(s=(0,o.Z)(["\n    // put some styles here\n"]))),I=[{label:"File",key:"File",disabled:!0,children:[{label:"New book",key:"newBook",icon:(0,v.jsx)(h.G,{icon:u.FL8}),disabled:!0},{label:"Oper existing",key:"openExisting",icon:(0,v.jsx)(h.G,{icon:u.cC_}),disabled:!0}]},{label:"Book",key:"bookOptions",children:[{label:"Add new chapter",key:"addNewChapter",icon:(0,v.jsx)(h.G,{icon:u.b7h})},{label:"Schuffle chapters",key:"schuffleChapters",disabled:!1,icon:(0,v.jsx)(h.G,{icon:u.RJo})},{label:"Statistics",key:"bookStatistics",disabled:!0,icon:(0,v.jsx)(h.G,{icon:u.OS1})},{label:"Metadata",key:"metadata",disabled:!1,icon:(0,v.jsx)(h.G,{icon:u.cnt})}]},{label:"Export",key:"exportBook",disabled:!0,children:[{label:"Export to HTML",key:"exportHtml",disabled:!0,icon:(0,v.jsx)(h.G,{icon:u.w49})},{label:"Export to PDF",key:"exportPdf",disabled:!0,icon:(0,v.jsx)(h.G,{icon:u.gSj})},{label:"Export to TXT",key:"exportTxt",disabled:!0,icon:(0,v.jsx)(h.G,{icon:u.nfZ})}]},{label:"Html Preview",key:"previewBook",disabled:!1},{label:"Play",key:"playBook",disabled:!1},{label:"Graph",key:"graphBook",disabled:!0},{label:"About",key:"aboutApp",disabled:!0,children:[{label:"Help",key:"appHelp",disabled:!0,icon:(0,v.jsx)(h.G,{icon:u.w49})}]}],H=function(){var e=(0,d.s0)(),t=a.useState(""),n=(0,l.Z)(t,2),i=n[0],s=n[1],o=a.useState(!1),c=(0,l.Z)(o,2),h=c[0],u=c[1],p=a.useState(!1),b=(0,l.Z)(p,2),x=b[0],f=b[1],m=a.useState(!1),k=(0,l.Z)(m,2),Z=k[0],g=k[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(P,{children:(0,v.jsx)(r.Z,{onClick:function(t){switch(s(t.key),t.key){case"addNewChapter":f(!0);break;case"metadata":u(!0);break;case"schuffleChapters":g(!0);break;case"previewBook":e("/preview");break;case"playBook":e("/play")}},selectedKeys:[i],mode:"horizontal",items:I})}),(0,v.jsx)(w,{isVisible:h,setIsVisible:u}),(0,v.jsx)(_.Z,{isVisible:x,setIsVisible:f}),(0,v.jsx)(N.Z,{isVisible:Z,setIsVisible:g})]})}},8190:function(e,t,n){n.d(t,{Z:function(){return m}});var i,s=n(9439),l=n(168),o=n(3272),a=n(3085),r=n(280),c=n(3478),d=n(7309),h=(n(2791),n(6031)),u=n(6697),p=n(5262),b=n(5868),x=n(184),f=h.ZP.div(i||(i=(0,l.Z)(["\n    // put some styles here\n"]))),m=function(e){var t=e.isVisible,n=e.setIsVisible,i=o.Z.useForm(),l=(0,s.Z)(i,1)[0],h=(0,u.T)();return(0,x.jsx)(f,{children:(0,x.jsx)(r.Z,{title:"Create new Chapter",visible:t,onCancel:function(){n(!1)},footer:null,width:700,children:(0,x.jsxs)(o.Z,{form:l,autoComplete:"off",layout:"vertical",requiredMark:"optional",size:"large",onFinish:function(e){h((0,p.V_)(e.title)),a.Z.success({message:"Chapter created",description:'Chapter "'.concat(e.title,"\" created. You can select it in chapter's tree on the left to edit it's content."),placement:"bottomRight",duration:8}),l.resetFields(),n(!1)},initialValues:{title:"New chapter very new title"},children:[(0,x.jsx)(o.Z.Item,{name:"title",rules:[{required:!0,message:"Enter the title!"},{min:b.k.CHAPTER_TITLE_LENGTH_MIN,message:"Min length ".concat(b.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:b.k.CHAPTER_TITLE_LENGTH_MAX,message:"Max length ".concat(b.k.CHAPTER_TITLE_LENGTH_MAX," chars!")}],children:(0,x.jsx)(c.Z,{placeholder:"ex. Entering dungeon's kitchen"})}),(0,x.jsx)(o.Z.Item,{style:{textAlign:"end"},children:(0,x.jsx)(d.Z,{htmlType:"submit",children:"Create chapter"})})]})})})}},8425:function(e,t,n){n.d(t,{Z:function(){return f}});var i,s=n(168),l=n(9964),o=n(3085),a=n(280),r=n(3099),c=n(7309),d=(n(2791),n(5262)),h=n(6697),u=n(6031),p=n(184),b=u.ZP.div(i||(i=(0,s.Z)(["\n    // put some styles here\n"]))),x=l.Z.Text,f=function(e){var t=e.isVisible,n=e.setIsVisible,i=(0,h.T)(),s=function(){n(!1)};return(0,p.jsx)(b,{children:(0,p.jsxs)(a.Z,{title:"Schuffle chapters",visible:t,onCancel:s,footer:null,children:[(0,p.jsx)(x,{children:"Do you really want to shuffle chapters?"}),(0,p.jsx)("div",{style:{textAlign:"end"},children:(0,p.jsxs)(r.Z,{size:"middle",children:[(0,p.jsx)(c.Z,{onClick:s,children:"Cancel"}),(0,p.jsx)(c.Z,{onClick:function(){i((0,d.FE)()),o.Z.success({message:"Shuffled chapters",description:"Chapters shuffled.",placement:"bottomRight"}),n(!1)},style:{color:"#fa8c16",borderColor:"#fa8c16"},children:"Shuffle"})]})})]})})}},8211:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var i,s=n(168),l=n(6106),o=n(914),a=n(3433),r=n(9439),c=n(2791),d=n(6031),h=n(6697),u=n(2810),p=n(6015),b=n(5868),x=n(184),f=d.ZP.div(i||(i=(0,s.Z)(["\n    // put some styles here\n    height: 100%;\n    padding: 10px;\n    .graph-container {\n        background-color: #222;\n        height: 100%;\n        border: 1px solid #444;\n    }\n"]))),m={nodes:[],edges:[]},k={layout:{hierarchical:!1,randomSeed:321},edges:{color:"#FFFFFF",smooth:!0},nodes:{shape:"box"},height:"100%",width:"100%"},Z={select:function(e){e.nodes,e.edges}};function g(e){return e.id===b.k.FIRST_CHAPTER_ID?"blue":"white"}var j,y=function(){var e=(0,h.C)((function(e){return e.gamebook})),t=e.chapters,n=(e.selectedId,c.useState(m)),i=(0,r.Z)(n,2),s=i[0],l=i[1];return c.useEffect((function(){var e=t.map((function(e){return e.id})),n=t.map((function(n){var i,s,l=null===(i=n.content)||void 0===i||null===(s=i.match(/(\d+)/g))||void 0===s?void 0:s.map((function(e){return parseInt(e)}));return null===l||void 0===l?void 0:l.map((function(i){return i>0&&i<t.length?{from:n.id,to:e[i-1]}:{from:n.id,to:"NO_CHAPTER"}}))})).flat();l({nodes:[].concat((0,a.Z)(t.map((function(e){return{id:e.id,label:"".concat(e.chapterNumber," ").concat(e.title.slice(0,10)),title:"".concat(e.chapterNumber," ").concat(e.title.slice(0,10)),color:g(e)}}))),[{id:"NO_CHAPTER",label:"NO CHAPTER",title:"NO CHAPTER",color:"red"}]),edges:(0,a.Z)(n)})}),[t]),(0,x.jsx)(f,{children:(0,x.jsx)("div",{className:"graph-container",children:(0,x.jsx)(p.Z,{graph:s,options:k,events:Z},(0,u.Z)())})})},v=n(1668),C=d.ZP.div(j||(j=(0,s.Z)(["\n    // put some styles here\n    height: 100vh;\n    .graph-big_page-container {\n        height: calc(100% - 70px);\n        width: 100%;\n    }\n    .graph-big_tree-container {\n        width: 100%;\n    }\n"]))),T=function(){return(0,x.jsxs)(C,{children:[(0,x.jsx)(v.Z,{}),(0,x.jsx)(l.Z,{className:"graph-big_page-container",children:(0,x.jsx)(o.Z,{className:"graph-big_tree-container",children:(0,x.jsx)(y,{})})})]})}},6697:function(e,t,n){n.d(t,{C:function(){return l},T:function(){return s}});var i=n(9434),s=function(){return(0,i.I0)()},l=i.v9}}]);
//# sourceMappingURL=211.75236ca6.chunk.js.map