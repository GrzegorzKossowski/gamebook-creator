"use strict";(self.webpackChunkgamebook_creator=self.webpackChunkgamebook_creator||[]).push([[273],{6273:function(e,t,i){i.d(t,{Z:function(){return S}});var n,s,a,o,l=i(9439),r=i(168),c=i(2791),d=i(6060),u=i(6031),m=i(6871),h=i(4483),p=i(3174),b=i(6697),x=i(8604),f=i(4165),k=i(5861),Z=i(3272),y=i(3085),j=i(280),T=i(3478),g=i(3099),_=i(7309),E=i(5868),N=i(184),v=u.ZP.div(n||(n=(0,r.Z)(["\n    // put some styles here\n"]))),C=function(e){var t=e.isVisible,i=e.setIsVisible,n=(0,b.T)(),s=(0,b.C)((function(e){return e.gamebook})),a=s.authorName,o=s.gamebookTitle,r=Z.Z.useForm(),c=(0,l.Z)(r,1)[0],d=function(){var e=(0,k.Z)((0,f.Z)().mark((function e(t){var s,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.authorName,a=t.gamebookTitle,s.trim(),a.trim(),n((0,x._i)({authorName:s,gamebookTitle:a})),y.Z.success({message:"Metadata changed",description:"".concat(s,', creator of "').concat(a,'" saved.'),placement:"bottomRight"}),i(!1),c.resetFields();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){c.resetFields(),i(!1)};return(0,N.jsx)(v,{children:(0,N.jsx)(j.Z,{title:"View / Edit gamebook metadata",visible:t,footer:null,onCancel:u,children:(0,N.jsxs)(Z.Z,{form:c,layout:"vertical",autoComplete:"off",requiredMark:"optional",onFinish:d,initialValues:{authorName:a,gamebookTitle:o},children:[(0,N.jsx)(Z.Z.Item,{label:"Author's name",name:"authorName",rules:[{required:!0,message:"Please input author's name!"},{min:E.k.AUHOR_NAME_LENGTH_MIN,message:"Name min ".concat(E.k.AUHOR_NAME_LENGTH_MIN," chars!")},{max:E.k.AUHOR_NAME_LENGTH_MAX,message:"Name max ".concat(E.k.AUHOR_NAME_LENGTH_MAX," chars")}],children:(0,N.jsx)(T.Z,{placeholder:"ex. John Doe"})}),(0,N.jsx)(Z.Z.Item,{label:"Title",name:"gamebookTitle",rules:[{required:!0,message:"Please input gamebook main title!"},{min:E.k.CHAPTER_TITLE_LENGTH_MIN,message:"Name min ".concat(E.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:E.k.CHAPTER_TITLE_LENGTH_MAX,message:"Name max ".concat(E.k.CHAPTER_TITLE_LENGTH_MAX," chars")}],children:(0,N.jsx)(T.Z,{placeholder:"ex. New Journey of Halflings"})}),(0,N.jsx)(Z.Z.Item,{style:{textAlign:"end"},children:(0,N.jsxs)(g.Z,{size:"middle",children:[(0,N.jsx)(_.Z,{onClick:u,children:"Cancel"}),(0,N.jsx)(_.Z,{type:"primary",htmlType:"submit",children:"Submit"})]})})]})})})},I=i(8425),A=i(8190),w=i(3231),H=function(e){var t=e.gamebookTitle,i=e.authorName,n=e.introduction,s=e.chapters,a="".concat(t,"\n\n");return a+="by ".concat(i,"\n\n"),a+="=========================\n\n\n",a+="Introduciton\n\n"+n+"\n\n",s.forEach((function(e){a+="".concat(e.chapterNumber,"\n\n"),a+="".concat(e.content,"\n\n\n\n")})),a+="END"},M=u.ZP.div(s||(s=(0,r.Z)(["\n    // put some styles here\n"]))),L=function(e){var t=e.isVisible,i=e.setIsVisible,n=(0,b.C)((function(e){return e.gamebook})),s=n.gamebookTitle,a=n.authorName,o=n.chapters,r=n.introduction,d=Z.Z.useForm(),u=(0,l.Z)(d,1)[0],m=c.useState("text/plain"),h=(0,l.Z)(m,2),p=h[0],x=(h[1],function(){var e=(0,k.Z)((0,f.Z)().mark((function e(t){var n,l,c,d;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="text/plain"===t.filetype?new Blob([H({gamebookTitle:s,authorName:a,introduction:r,chapters:o})],{type:"text/plain"}):new Blob([JSON.stringify({gamebookTitle:s,authorName:a,introduction:r,chapters:o})],{type:"application/json"}),l=window.URL.createObjectURL(n),c=s||"gamebook_file",(d=document.createElement("a")).download=c,d.innerHTML="Download File",d.href=l,d.onclick=function(e){document.body.removeChild(e.target)},d.style.display="none",document.body.appendChild(d),d.click(),y.Z.success({message:"Saving...",description:"File ".concat(c," by ").concat(a," saved."),placement:"bottomRight"}),i(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=function(){u.resetFields(),i(!1)};return(0,N.jsx)(M,{children:(0,N.jsx)(j.Z,{title:"Export to file",visible:t,footer:null,onCancel:v,children:(0,N.jsxs)(Z.Z,{form:u,layout:"vertical",autoComplete:"off",requiredMark:!1,onFinish:x,initialValues:{gamebookTitle:s,filetype:p},children:[(0,N.jsx)(Z.Z.Item,{label:"Filename",name:"gamebookTitle",rules:[{required:!0,message:"Please input file's name!"},{min:E.k.FILE_NAME_LENGTH_MIN,message:"Filename min ".concat(E.k.FILE_NAME_LENGTH_MIN," chars!")},{max:E.k.FILE_NAME_LENGTH_MAX,message:"Filename max ".concat(E.k.FILE_NAME_LENGTH_MAX," chars")}],children:(0,N.jsx)(T.Z,{placeholder:"ex. ".concat(s)})}),(0,N.jsx)(Z.Z.Item,{label:"Filetype",name:"filetype",children:(0,N.jsxs)(w.ZP.Group,{children:[(0,N.jsx)(w.ZP,{value:"text/plain",children:"txt"}),(0,N.jsx)(w.ZP,{value:"application/json",children:"json"})]})}),(0,N.jsx)(Z.Z.Item,{style:{textAlign:"end"},children:(0,N.jsxs)(g.Z,{size:"middle",children:[(0,N.jsx)(_.Z,{onClick:v,children:"Cancel"}),(0,N.jsx)(_.Z,{type:"primary",htmlType:"submit",children:"Submit"})]})})]})})})},F=u.ZP.div(a||(a=(0,r.Z)(["\n    // put some styles here\n    .modal-introduction {\n        &__input {\n            &-textarea {\n                resize: 'none';\n                height: '50vh';\n                font-size: '1.2rem';\n            }\n        }\n    }\n"]))),G=function(e){var t=e.isVisible,i=e.setIsVisible,n=(0,b.T)(),s=(0,b.C)((function(e){return e.gamebook})),a=(s.authorName,s.gamebookTitle,s.introduction),o=Z.Z.useForm(),r=(0,l.Z)(o,1)[0],c=function(){var e=(0,k.Z)((0,f.Z)().mark((function e(t){var s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.introduction,n((0,x._i)({introduction:s})),r.resetFields(),i(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){r.resetFields(),i(!1)};return(0,N.jsx)(F,{children:(0,N.jsx)(j.Z,{title:"Introduction",visible:t,footer:null,onCancel:d,width:"50%",children:(0,N.jsxs)(Z.Z,{form:r,layout:"vertical",autoComplete:"off",requiredMark:!1,onFinish:c,initialValues:{introduction:a},children:[(0,N.jsx)(Z.Z.Item,{name:"introduction",children:(0,N.jsx)(T.Z.TextArea,{style:{resize:"none",height:"50vh",fontSize:"1.2rem"}})}),(0,N.jsx)(Z.Z.Item,{style:{textAlign:"end"},children:(0,N.jsxs)(g.Z,{size:"middle",children:[(0,N.jsx)(_.Z,{onClick:d,children:"Cancel"}),(0,N.jsx)(_.Z,{type:"primary",htmlType:"submit",children:"Submit"})]})})]})})})},V=u.ZP.div(o||(o=(0,r.Z)(["\n    // put some styles here\n"]))),P=[{label:"File",key:"File",disabled:!1,children:[{label:"New book",key:"newBook",icon:(0,N.jsx)(h.G,{icon:p.FL8}),disabled:!0},{label:"Oper existing",key:"openExisting",icon:(0,N.jsx)(h.G,{icon:p.cC_}),disabled:!0},{label:"Export",key:"exportBook",disabled:!1,icon:(0,N.jsx)(h.G,{icon:p.EdJ})}]},{label:"Book",key:"bookOptions",children:[{label:"Add new chapter",key:"addNewChapter",icon:(0,N.jsx)(h.G,{icon:p.b7h})},{label:"Schuffle chapters",key:"schuffleChapters",disabled:!1,icon:(0,N.jsx)(h.G,{icon:p.RJo})},{label:"Introduction",key:"introduction",disabled:!1,icon:(0,N.jsx)(h.G,{icon:p.rxY})},{label:"Metadata",key:"metadata",disabled:!1,icon:(0,N.jsx)(h.G,{icon:p.ZWV})},{label:"Statistics",key:"bookStatistics",disabled:!0,icon:(0,N.jsx)(h.G,{icon:p.OS1})}]},{label:"Html Preview",key:"previewBook",disabled:!1},{label:"Play",key:"playBook",disabled:!1},{label:"Graph",key:"graphBook",disabled:!0},{label:"About",key:"aboutApp",disabled:!0,children:[{label:"Help",key:"appHelp",disabled:!0,icon:(0,N.jsx)(h.G,{icon:p.w49})}]},{label:"DropDB",key:"dropDB",disabled:!0,danger:!0}],S=function(){var e=(0,m.s0)(),t=(0,b.T)(),i=c.useState(""),n=(0,l.Z)(i,2),s=n[0],a=n[1],o=c.useState(!1),r=(0,l.Z)(o,2),u=r[0],h=r[1],p=c.useState(!1),f=(0,l.Z)(p,2),k=f[0],Z=f[1],y=c.useState(!1),j=(0,l.Z)(y,2),T=j[0],g=j[1],_=c.useState(!1),E=(0,l.Z)(_,2),v=E[0],w=E[1],H=c.useState(!1),M=(0,l.Z)(H,2),F=M[0],S=M[1];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(V,{children:(0,N.jsx)(d.Z,{onClick:function(i){switch(a(i.key),i.key){case"addNewChapter":Z(!0);break;case"metadata":h(!0);break;case"schuffleChapters":g(!0);break;case"introduction":w(!0);break;case"exportBook":S(!0);break;case"previewBook":e("/preview");break;case"playBook":e("/play");break;case"dropDB":t((0,x.bQ)()),e("/")}},selectedKeys:[s],mode:"horizontal",items:P})}),(0,N.jsx)(C,{isVisible:u,setIsVisible:h}),(0,N.jsx)(A.Z,{isVisible:k,setIsVisible:Z}),(0,N.jsx)(I.Z,{isVisible:T,setIsVisible:g}),(0,N.jsx)(L,{isVisible:F,setIsVisible:S}),(0,N.jsx)(G,{isVisible:v,setIsVisible:w})]})}},8190:function(e,t,i){i.d(t,{Z:function(){return f}});var n,s=i(9439),a=i(168),o=i(3272),l=i(3085),r=i(280),c=i(3478),d=i(7309),u=(i(2791),i(6031)),m=i(6697),h=i(8604),p=i(5868),b=i(184),x=u.ZP.div(n||(n=(0,a.Z)(["\n    // put some styles here\n"]))),f=function(e){var t=e.isVisible,i=e.setIsVisible,n=o.Z.useForm(),a=(0,s.Z)(n,1)[0],u=(0,m.T)();return(0,b.jsx)(x,{children:(0,b.jsx)(r.Z,{title:"Create new Chapter",visible:t,onCancel:function(){i(!1)},footer:null,width:700,children:(0,b.jsxs)(o.Z,{form:a,autoComplete:"off",layout:"vertical",requiredMark:"optional",size:"large",onFinish:function(e){u((0,h.Xi)(e.title)),l.Z.success({message:"Chapter created",description:'Chapter "'.concat(e.title,"\" created. You can select it in chapter's tree on the left to edit it's content."),placement:"bottomRight",duration:3}),a.resetFields(),i(!1)},initialValues:{title:"New chapter very new title"},children:[(0,b.jsx)(o.Z.Item,{name:"title",rules:[{required:!0,message:"Enter the title!"},{min:p.k.CHAPTER_TITLE_LENGTH_MIN,message:"Min length ".concat(p.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:p.k.CHAPTER_TITLE_LENGTH_MAX,message:"Max length ".concat(p.k.CHAPTER_TITLE_LENGTH_MAX," chars!")}],children:(0,b.jsx)(c.Z,{placeholder:"ex. Entering dungeon's kitchen"})}),(0,b.jsx)(o.Z.Item,{style:{textAlign:"end"},children:(0,b.jsx)(d.Z,{htmlType:"submit",children:"Create chapter"})})]})})})}},8425:function(e,t,i){i.d(t,{Z:function(){return x}});var n,s=i(168),a=i(9964),o=i(3085),l=i(280),r=i(3099),c=i(7309),d=(i(2791),i(8604)),u=i(6697),m=i(6031),h=i(184),p=m.ZP.div(n||(n=(0,s.Z)(["\n    // put some styles here\n"]))),b=a.Z.Text,x=function(e){var t=e.isVisible,i=e.setIsVisible,n=(0,u.T)(),s=function(){i(!1)};return(0,h.jsx)(p,{children:(0,h.jsxs)(l.Z,{title:"Schuffle chapters",visible:t,onCancel:s,footer:null,children:[(0,h.jsx)(b,{children:"Do you really want to shuffle chapters?"}),(0,h.jsx)("div",{style:{textAlign:"end"},children:(0,h.jsxs)(r.Z,{size:"middle",children:[(0,h.jsx)(c.Z,{onClick:s,children:"Cancel"}),(0,h.jsx)(c.Z,{onClick:function(){n((0,d.FE)()),o.Z.success({message:"Shuffled chapters",description:"Chapters shuffled.",placement:"bottomRight"}),i(!1)},style:{color:"#fa8c16",borderColor:"#fa8c16"},children:"Shuffle"})]})})]})})}}}]);
//# sourceMappingURL=273.c4945f48.chunk.js.map