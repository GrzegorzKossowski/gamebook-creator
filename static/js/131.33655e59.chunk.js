"use strict";(self.webpackChunkgamebook_creator=self.webpackChunkgamebook_creator||[]).push([[131],{1668:function(e,n,t){t.d(n,{Z:function(){return O}});var i,r,a=t(9439),l=t(168),o=t(2791),s=t(6060),c=t(6031),d=t(6871),u=t(4483),h=t(3174),p=t(9964),f=t(3085),x=t(280),m=t(6106),v=t(914),b=t(3099),g=t(7309),Z=t(62),j=t(6697),y=t(5262),k=t(184),C=p.Z.Paragraph,N=p.Z.Title,E=c.ZP.div(i||(i=(0,l.Z)(["\n    // put some styles here\n"]))),T=function(e){var n=e.isVisible,t=e.setIsVisible,i=(0,j.T)(),r=(0,j.C)((function(e){return e.gamebook})),l=r.authorName,s=r.gamebookTitle,c=o.useState(l),d=(0,a.Z)(c,2),u=d[0],h=d[1],p=o.useState(s),T=(0,a.Z)(p,2),I=T[0],w=T[1],_=function(){t(!1)};return(0,k.jsx)(E,{children:(0,k.jsxs)(x.Z,{title:"View / Edit gamebook metadata",visible:n,footer:null,onCancel:_,children:[(0,k.jsx)(N,{level:5,children:"Author"}),(0,k.jsx)(C,{editable:{icon:(0,k.jsx)(Z.Z,{}),tooltip:"click to edit text",onChange:h},children:u}),(0,k.jsx)(N,{level:5,children:"Title"}),(0,k.jsx)(C,{editable:{icon:(0,k.jsx)(Z.Z,{}),tooltip:"click to edit text",onChange:w},children:I}),(0,k.jsx)(m.Z,{children:(0,k.jsx)(v.Z,{span:24,style:{display:"flex",justifyContent:"end"},children:(0,k.jsxs)(b.Z,{direction:"horizontal",size:"large",children:[(0,k.jsx)(g.Z,{onClick:_,children:"Cancel"}),(0,k.jsx)(g.Z,{type:"primary",onClick:function(){i((0,y.y2)(u)),i((0,y.K2)(I)),f.Z.success({message:"Metadata changed",description:"".concat(u,', creator of "').concat(I,'" saved.'),placement:"bottomRight"}),t(!1)},children:"Save"})]})})})]})})},I=t(8190),w=t(8425),_=c.ZP.div(r||(r=(0,l.Z)(["\n    // put some styles here\n"]))),P=[{label:"File",key:"File",disabled:!0,children:[{label:"New book",key:"newBook",icon:(0,k.jsx)(u.G,{icon:h.FL8}),disabled:!0},{label:"Oper existing",key:"openExisting",icon:(0,k.jsx)(u.G,{icon:h.cC_}),disabled:!0}]},{label:"Book",key:"bookOptions",children:[{label:"Add new chapter",key:"addNewChapter",icon:(0,k.jsx)(u.G,{icon:h.b7h})},{label:"Schuffle chapters",key:"schuffleChapters",disabled:!1,icon:(0,k.jsx)(u.G,{icon:h.RJo})},{label:"Statistics",key:"bookStatistics",disabled:!0,icon:(0,k.jsx)(u.G,{icon:h.OS1})},{label:"Metadata",key:"metadata",disabled:!1,icon:(0,k.jsx)(u.G,{icon:h.cnt})}]},{label:"Export",key:"exportBook",disabled:!0,children:[{label:"Export to HTML",key:"exportHtml",disabled:!0,icon:(0,k.jsx)(u.G,{icon:h.w49})},{label:"Export to PDF",key:"exportPdf",disabled:!0,icon:(0,k.jsx)(u.G,{icon:h.gSj})},{label:"Export to TXT",key:"exportTxt",disabled:!0,icon:(0,k.jsx)(u.G,{icon:h.nfZ})}]},{label:"Html Preview",key:"previewBook",disabled:!1},{label:"Graph",key:"graphBook",disabled:!0},{label:"About",key:"aboutApp",disabled:!0,children:[{label:"Help",key:"appHelp",disabled:!0,icon:(0,k.jsx)(u.G,{icon:h.w49})}]}],O=function(){var e=(0,d.s0)(),n=o.useState(""),t=(0,a.Z)(n,2),i=t[0],r=t[1],l=o.useState(!1),c=(0,a.Z)(l,2),u=c[0],h=c[1],p=o.useState(!1),f=(0,a.Z)(p,2),x=f[0],m=f[1],v=o.useState(!1),b=(0,a.Z)(v,2),g=b[0],Z=b[1];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(_,{children:(0,k.jsx)(s.Z,{onClick:function(n){switch(r(n.key),n.key){case"addNewChapter":m(!0);break;case"metadata":h(!0);break;case"schuffleChapters":Z(!0);break;case"previewBook":e("/preview")}},selectedKeys:[i],mode:"horizontal",items:P})}),(0,k.jsx)(T,{isVisible:u,setIsVisible:h}),(0,k.jsx)(I.Z,{isVisible:x,setIsVisible:m}),(0,k.jsx)(w.Z,{isVisible:g,setIsVisible:Z})]})}},8190:function(e,n,t){t.d(n,{Z:function(){return v}});var i,r=t(9439),a=t(168),l=t(3272),o=t(3085),s=t(280),c=t(3478),d=t(7309),u=(t(2791),t(6031)),h=t(6697),p=t(5262),f=t(5868),x=t(184),m=u.ZP.div(i||(i=(0,a.Z)(["\n    // put some styles here\n"]))),v=function(e){var n=e.isVisible,t=e.setIsVisible,i=l.Z.useForm(),a=(0,r.Z)(i,1)[0],u=(0,h.T)();return(0,x.jsx)(m,{children:(0,x.jsx)(s.Z,{title:"Create new Chapter",visible:n,onCancel:function(){t(!1)},footer:null,width:700,children:(0,x.jsxs)(l.Z,{form:a,autoComplete:"off",layout:"vertical",requiredMark:"optional",size:"large",onFinish:function(e){u((0,p.V_)(e.title)),o.Z.success({message:"Chapter created",description:'Chapter "'.concat(e.title,"\" created. You can select it in chapter's tree on the left to edit it's content."),placement:"bottomRight",duration:8}),a.resetFields(),t(!1)},initialValues:{title:"New chapter very new title"},children:[(0,x.jsx)(l.Z.Item,{name:"title",rules:[{required:!0,message:"Enter the title!"},{min:f.k.CHAPTER_TITLE_LENGTH_MIN,message:"Min length ".concat(f.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:f.k.CHAPTER_TITLE_LENGTH_MAX,message:"Max length ".concat(f.k.CHAPTER_TITLE_LENGTH_MAX," chars!")}],children:(0,x.jsx)(c.Z,{placeholder:"ex. Entering dungeon's kitchen"})}),(0,x.jsx)(l.Z.Item,{style:{textAlign:"end"},children:(0,x.jsx)(d.Z,{htmlType:"submit",children:"Create chapter"})})]})})})}},8425:function(e,n,t){t.d(n,{Z:function(){return m}});var i,r=t(168),a=t(9964),l=t(3085),o=t(280),s=t(3099),c=t(7309),d=(t(2791),t(5262)),u=t(6697),h=t(6031),p=t(184),f=h.ZP.div(i||(i=(0,r.Z)(["\n    // put some styles here\n"]))),x=a.Z.Text,m=function(e){var n=e.isVisible,t=e.setIsVisible,i=(0,u.T)(),r=function(){t(!1)};return(0,p.jsx)(f,{children:(0,p.jsxs)(o.Z,{title:"Schuffle chapters",visible:n,onCancel:r,footer:null,children:[(0,p.jsx)(x,{children:"Do you really want to shuffle chapters?"}),(0,p.jsx)("div",{style:{textAlign:"end"},children:(0,p.jsxs)(s.Z,{size:"middle",children:[(0,p.jsx)(c.Z,{onClick:r,children:"Cancel"}),(0,p.jsx)(c.Z,{onClick:function(){i((0,d.FE)()),l.Z.success({message:"Shuffled chapters",description:"Chapters shuffled.",placement:"bottomRight"}),t(!1)},style:{color:"#fa8c16",borderColor:"#fa8c16"},children:"Shuffle"})]})})]})})}},131:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ne}});var i,r=t(168),a=t(6106),l=t(914),o=t(2791),s=t(6031),c=t(1413),d=t(9439),u=t(9964),h=t(3478),p=t(7309),f=t(6697),x=t(5262),m=t(4483),v=t(3174),b=t(184),g=function(e){var n=e.dead,t=e.fixed,i=e.ready,r=e.start,a=e.win;return(0,b.jsxs)(b.Fragment,{children:[r&&(0,b.jsx)(m.G,{icon:v.zc,size:"sm",style:{marginRight:"10px"}}),t&&(0,b.jsx)(m.G,{icon:v.Lad,size:"sm",style:{marginRight:"10px"}}),n&&(0,b.jsx)(m.G,{icon:v.QmK,size:"sm",style:{marginRight:"10px"}}),a&&(0,b.jsx)(m.G,{icon:v.kWN,size:"sm",style:{marginRight:"10px"},color:"gold"}),i?(0,b.jsx)(m.G,{icon:v.fV7,size:"sm",style:{marginRight:"10px"},color:"green"}):(0,b.jsx)(m.G,{icon:v.WA2,size:"sm",style:{marginRight:"10px"},color:"red"})]})},Z=t(8190),j=u.Z.Text,y=s.ZP.div(i||(i=(0,r.Z)(["\n    // put some styles here\n    height: 100%;\n    padding: 10px;\n\n    .tree-list {\n        overflow-y: auto;\n        height: calc(100% - 100px);\n        border: 1px solid #444;\n        margin: 10px 0;\n        list-style-type: none;\n        padding-left: 15px;\n        li {\n            width: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            font-size: 1.2rem;\n            color: #bbb;\n            margin: 10px 0px;\n            padding: 5px 0;\n            &:hover {\n                background-color: #222;\n                cursor: pointer;\n            }\n        }\n        &_selected {\n            background-color: #333;\n        }\n    }\n"]))),k=function(){var e=(0,f.C)((function(e){return e.gamebook})),n=e.chapters,t=e.selectedId,i=o.useState(t),r=(0,d.Z)(i,2),a=(r[0],r[1]),l=o.useState(""),s=(0,d.Z)(l,2),u=s[0],k=s[1],C=o.useState(!1),N=(0,d.Z)(C,2),E=N[0],T=N[1],I=(0,f.T)();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(y,{children:[(0,b.jsx)(h.Z,{placeholder:"Filter paragraphs by title or number",size:"large",allowClear:!0,value:u,onChange:function(e){k(e.target.value)}}),(0,b.jsx)("ul",{className:"tree-list",children:n.filter((function(e){return u.split(" ").some((function(n){return e.title.toLowerCase().trim().includes(n.toLowerCase().trim())||parseInt(n.trim())===e.chapterNumber}))})).map((function(e,n){return(0,b.jsxs)("li",{className:"tree-list_chapter ".concat(e.id===t?"tree-list_selected":""),onClick:function(){return n=e.id,a(n),void I((0,x.kC)(n));var n},children:[(0,b.jsx)(j,{children:"".concat(e.chapterNumber,") ix: ").concat(n," - ").concat(e.title.length>25?e.title.slice(0,25)+"...":e.title)}),(0,b.jsx)("div",{children:(null===e||void 0===e?void 0:e.status)&&(0,b.jsx)(g,(0,c.Z)({},e.status))})]},e.id)}))}),(0,b.jsxs)(p.Z,{block:!0,size:"large",onClick:function(){T(!0)},children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.b7h})," ","New chapter"]}),(0,b.jsx)(Z.Z,{isVisible:E,setIsVisible:T})]})})},C=t(3272),N=t(7462),E=t(4942),T=t(1694),I=t.n(T),w=t(3785),_=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(t[i[r]]=e[i[r]])}return t},P=function(e){var n,t=o.useContext(w.E_),i=t.getPrefixCls,r=t.direction,a=e.prefixCls,l=e.type,s=void 0===l?"horizontal":l,c=e.orientation,d=void 0===c?"center":c,u=e.orientationMargin,h=e.className,p=e.children,f=e.dashed,x=e.plain,m=_(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),v=i("divider",a),b=d.length>0?"-".concat(d):d,g=!!p,Z="left"===d&&null!=u,j="right"===d&&null!=u,y=I()(v,"".concat(v,"-").concat(s),(n={},(0,E.Z)(n,"".concat(v,"-with-text"),g),(0,E.Z)(n,"".concat(v,"-with-text").concat(b),g),(0,E.Z)(n,"".concat(v,"-dashed"),!!f),(0,E.Z)(n,"".concat(v,"-plain"),!!x),(0,E.Z)(n,"".concat(v,"-rtl"),"rtl"===r),(0,E.Z)(n,"".concat(v,"-no-default-orientation-margin-left"),Z),(0,E.Z)(n,"".concat(v,"-no-default-orientation-margin-right"),j),n),h),k=(0,N.Z)((0,N.Z)({},Z&&{marginLeft:u}),j&&{marginRight:u});return o.createElement("div",(0,N.Z)({className:y},m,{role:"separator"}),p&&o.createElement("span",{className:"".concat(v,"-inner-text"),style:k},p))},O=t(4925),S=t(5671),F=t(3144),V=t(136),G=t(7277),R=function(e){(0,V.Z)(t,e);var n=(0,G.Z)(t);function t(e){var i;(0,S.Z)(this,t),(i=n.call(this,e)).handleChange=function(e){var n=i.props,t=n.disabled,r=n.onChange;t||("checked"in i.props||i.setState({checked:e.target.checked}),r&&r({target:(0,c.Z)((0,c.Z)({},i.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},i.saveInput=function(e){i.input=e};var r="checked"in e?e.checked:e.defaultChecked;return i.state={checked:r},i}return(0,F.Z)(t,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,n=this.props,t=n.prefixCls,i=n.className,r=n.style,a=n.name,l=n.id,s=n.type,c=n.disabled,d=n.readOnly,u=n.tabIndex,h=n.onClick,p=n.onFocus,f=n.onBlur,x=n.onKeyDown,m=n.onKeyPress,v=n.onKeyUp,b=n.autoFocus,g=n.value,Z=n.required,j=(0,O.Z)(n,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),y=Object.keys(j).reduce((function(e,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(e[n]=j[n]),e}),{}),k=this.state.checked,C=I()(t,i,(e={},(0,E.Z)(e,"".concat(t,"-checked"),k),(0,E.Z)(e,"".concat(t,"-disabled"),c),e));return o.createElement("span",{className:C,style:r},o.createElement("input",(0,N.Z)({name:a,id:l,type:s,required:Z,readOnly:d,disabled:c,tabIndex:u,className:"".concat(t,"-input"),checked:!!k,onClick:h,onFocus:p,onBlur:f,onKeyUp:v,onKeyDown:x,onKeyPress:m,onChange:this.handleChange,autoFocus:b,ref:this.saveInput,value:g},y)),o.createElement("span",{className:"".concat(t,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return"checked"in e?(0,c.Z)((0,c.Z)({},n),{},{checked:e.checked}):null}}]),t}(o.Component);R.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};var A=R,H=t(1940),M=t(3433),L=t(1818),z=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(t[i[r]]=e[i[r]])}return t},D=o.createContext(null),K=function(e,n){var t=e.defaultValue,i=e.children,r=e.options,a=void 0===r?[]:r,l=e.prefixCls,s=e.className,c=e.style,u=e.onChange,h=z(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),p=o.useContext(w.E_),f=p.getPrefixCls,x=p.direction,m=o.useState(h.value||t||[]),v=(0,d.Z)(m,2),b=v[0],g=v[1],Z=o.useState([]),j=(0,d.Z)(Z,2),y=j[0],k=j[1];o.useEffect((function(){"value"in h&&g(h.value||[])}),[h.value]);var C=function(){return a.map((function(e){return"string"===typeof e||"number"===typeof e?{label:e,value:e}:e}))},T=f("checkbox",l),_="".concat(T,"-group"),P=(0,L.Z)(h,["value","disabled"]);a&&a.length>0&&(i=C().map((function(e){return o.createElement(U,{prefixCls:T,key:e.value.toString(),disabled:"disabled"in e?e.disabled:h.disabled,value:e.value,checked:-1!==b.indexOf(e.value),onChange:e.onChange,className:"".concat(_,"-item"),style:e.style},e.label)})));var O={toggleOption:function(e){var n=b.indexOf(e.value),t=(0,M.Z)(b);-1===n?t.push(e.value):t.splice(n,1),"value"in h||g(t);var i=C();null===u||void 0===u||u(t.filter((function(e){return-1!==y.indexOf(e)})).sort((function(e,n){return i.findIndex((function(n){return n.value===e}))-i.findIndex((function(e){return e.value===n}))})))},value:b,disabled:h.disabled,name:h.name,registerValue:function(e){k((function(n){return[].concat((0,M.Z)(n),[e])}))},cancelValue:function(e){k((function(n){return n.filter((function(n){return n!==e}))}))}},S=I()(_,(0,E.Z)({},"".concat(_,"-rtl"),"rtl"===x),s);return o.createElement("div",(0,N.Z)({className:S,style:c},P,{ref:n}),o.createElement(D.Provider,{value:O},i))},B=o.forwardRef(K),Y=o.memo(B),q=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(t[i[r]]=e[i[r]])}return t},W=function(e,n){var t,i=e.prefixCls,r=e.className,a=e.children,l=e.indeterminate,s=void 0!==l&&l,c=e.style,d=e.onMouseEnter,u=e.onMouseLeave,h=e.skipGroup,p=void 0!==h&&h,f=q(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),x=o.useContext(w.E_),m=x.getPrefixCls,v=x.direction,b=o.useContext(D),g=(0,o.useContext)(H.aM).isFormItemInput,Z=o.useRef(f.value);o.useEffect((function(){null===b||void 0===b||b.registerValue(f.value)}),[]),o.useEffect((function(){if(!p)return f.value!==Z.current&&(null===b||void 0===b||b.cancelValue(Z.current),null===b||void 0===b||b.registerValue(f.value),Z.current=f.value),function(){return null===b||void 0===b?void 0:b.cancelValue(f.value)}}),[f.value]);var j=m("checkbox",i),y=(0,N.Z)({},f);b&&!p&&(y.onChange=function(){f.onChange&&f.onChange.apply(f,arguments),b.toggleOption&&b.toggleOption({label:a,value:f.value})},y.name=b.name,y.checked=-1!==b.value.indexOf(f.value),y.disabled=f.disabled||b.disabled);var k=I()((t={},(0,E.Z)(t,"".concat(j,"-wrapper"),!0),(0,E.Z)(t,"".concat(j,"-rtl"),"rtl"===v),(0,E.Z)(t,"".concat(j,"-wrapper-checked"),y.checked),(0,E.Z)(t,"".concat(j,"-wrapper-disabled"),y.disabled),(0,E.Z)(t,"".concat(j,"-wrapper-in-form-item"),g),t),r),C=I()((0,E.Z)({},"".concat(j,"-indeterminate"),s)),T=s?"mixed":void 0;return o.createElement("label",{className:k,style:c,onMouseEnter:d,onMouseLeave:u},o.createElement(A,(0,N.Z)({"aria-checked":T},y,{prefixCls:j,className:C,ref:n})),void 0!==a&&o.createElement("span",null,a))},X=o.forwardRef(W);X.displayName="Checkbox";var U=X,J=U;J.Group=Y,J.__ANT_CHECKBOX=!0;var Q,$,ee,ne,te,ie=J,re=t(3099),ae=t(8529),le=t(3085),oe=t(280),se=t(5868),ce=s.ZP.div(Q||(Q=(0,r.Z)(["\n    // put some styles here\n"]))),de=u.Z.Text,ue=function(e){var n=e.isVisible,t=e.setIsVisible,i=(0,f.C)((function(e){return e.gamebook})),r=i.selectedId,a=i.chapters,l=o.useState(void 0),s=(0,d.Z)(l,2),c=s[0],u=s[1],h=(0,f.T)();o.useEffect((function(){u(a.find((function(e){return e.id===r})))}),[r]);var m=function(){t(!1)};return(0,b.jsx)(ce,{children:(0,b.jsx)(oe.Z,{title:"Delete chapter",visible:n,onCancel:m,footer:null,children:r===se.k.FIRST_CHAPTER_ID?(0,b.jsxs)(b.Fragment,{children:["You can't delete chapter:"," ",(0,b.jsxs)(de,{style:{fontWeight:"bold",color:"#096dd9"},children:[null===c||void 0===c?void 0:c.chapterNumber,") ",null===c||void 0===c?void 0:c.title.slice(0,20),"..."]}),(0,b.jsx)("p",{children:"The very first chapter can't be deleted. It only can be edited."}),(0,b.jsx)(P,{}),(0,b.jsx)("div",{style:{textAlign:"end"},children:(0,b.jsx)(re.Z,{size:"middle",children:(0,b.jsx)(p.Z,{onClick:m,children:"Cancel"})})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(de,{children:"Do you really want to delete chapter: "}),(0,b.jsxs)(de,{style:{fontWeight:"bold"},children:[null===c||void 0===c?void 0:c.chapterNumber,") ",null===c||void 0===c?void 0:c.title.slice(0,20),"..."]}),(0,b.jsxs)(de,{type:"warning",children:["It can create some tree issues! All links to"," ",null===c||void 0===c?void 0:c.chapterNumber," become empty "," ","links."]}),(0,b.jsx)("div",{style:{textAlign:"end"},children:(0,b.jsxs)(re.Z,{size:"middle",children:[(0,b.jsx)(p.Z,{onClick:m,children:"Cancel"}),(0,b.jsx)(p.Z,{danger:!0,onClick:function(){c&&h((0,x.Te)(c)),le.Z.success({message:"Deleted chapter",description:"Chapter deleted.",placement:"bottomRight"}),t(!1)},children:"Delete"})]})})]})})})},he=t(8425),pe=s.ZP.div($||($=(0,r.Z)(["\n    // put some styles here\n    display: flex;\n    justify-content: space-between;\n"]))),fe=function(){var e=(0,f.C)((function(e){return e.gamebook})),n=e.selectedId,t=(e.chapters,(0,f.T)(),o.useState(!1)),i=(0,d.Z)(t,2),r=i[0],a=i[1],l=o.useState(!1),s=(0,d.Z)(l,2),c=s[0],u=s[1],h=o.useState(!1),x=(0,d.Z)(h,2),g=x[0],j=x[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(pe,{children:[(0,b.jsxs)(re.Z,{direction:"horizontal",children:[(0,b.jsx)(ae.Z,{title:"Create new chapter",children:(0,b.jsxs)(p.Z,{size:"large",onClick:function(){a(!0)},children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.b7h})," ","New chapter"]})}),(0,b.jsx)(ae.Z,{title:"Shuffle chapters",children:(0,b.jsxs)(p.Z,{size:"large",onClick:function(){j(!0)},children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.RJo})," ","Shuffle"]})})]}),(0,b.jsx)(ae.Z,{title:"Delete chapter",style:{marginLeft:"auto"},children:(0,b.jsxs)(p.Z,{size:"large",danger:!0,onClick:function(){u(!0)},disabled:!n,children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.$aW})," ","Delete"]})})]}),(0,b.jsx)(Z.Z,{isVisible:r,setIsVisible:a}),(0,b.jsx)(ue,{isVisible:c,setIsVisible:u}),(0,b.jsx)(he.Z,{isVisible:g,setIsVisible:j})]})},xe=s.ZP.div(ee||(ee=(0,r.Z)(["\n    // put some styles here\n    height: 100%;\n    textarea {\n        width: 100%;\n        height: 50vh;\n        padding: 12px 20px;\n        font-size: 1.2rem;\n        resize: none;\n    }\n"]))),me=function(){var e=o.useState(void 0),n=(0,d.Z)(e,2),t=n[0],i=n[1],r=(0,f.T)(),s=(0,f.C)((function(e){return e.gamebook})),u=s.chapters,g=s.selectedId,Z=C.Z.useForm(),j=(0,d.Z)(Z,1)[0];o.useEffect((function(){var e,n,t,r,a,l,o,s,c,d,h,p,f,x;g?(e=u.find((function(e){return e.id===g})),j.setFieldsValue({id:null===(n=e)||void 0===n?void 0:n.id,chapterNumber:null===(t=e)||void 0===t?void 0:t.chapterNumber,title:null===(r=e)||void 0===r?void 0:r.title,content:null===(a=e)||void 0===a?void 0:a.content,win:null===(l=e)||void 0===l||null===(o=l.status)||void 0===o?void 0:o.win,dead:null===(s=e)||void 0===s||null===(c=s.status)||void 0===c?void 0:c.dead,fixed:null===(d=e)||void 0===d||null===(h=d.status)||void 0===h?void 0:h.fixed,ready:null===(p=e)||void 0===p||null===(f=p.status)||void 0===f?void 0:f.ready}),i(null===(x=e)||void 0===x?void 0:x.chapterNumber)):(i(void 0),j.resetFields())}),[g]);return(0,b.jsxs)(xe,{children:[(0,b.jsx)(fe,{}),(0,b.jsx)(P,{}),(0,b.jsxs)(C.Z,{form:j,autoComplete:"off",size:"large",onFinish:function(e){if(g){var n=u.find((function(e){return e.id===g}));n&&r((0,x.IS)((0,c.Z)((0,c.Z)({},n),{},{title:e.title,content:e.content,status:(0,c.Z)((0,c.Z)({},n.status),{},{fixed:e.fixed,dead:e.dead,win:e.win,ready:e.ready})})))}else r((0,x.Hf)({title:e.title,content:e.content,status:{fixed:e.fixed,dead:e.dead,win:e.win,ready:e.ready}}))},children:[(0,b.jsxs)(a.Z,{children:[(0,b.jsx)(l.Z,{children:(0,b.jsx)(C.Z.Item,{name:"chapterNumber",hidden:!0,children:(0,b.jsx)(h.Z,{})})}),(0,b.jsx)(l.Z,{children:(0,b.jsx)(C.Z.Item,{name:"id",hidden:!0,children:(0,b.jsx)(h.Z,{})})})]}),(0,b.jsx)(C.Z.Item,{name:"title",rules:[{required:!0,message:"Title can't be empty!"},{min:se.k.CHAPTER_TITLE_LENGTH_MIN,message:"Min length ".concat(se.k.CHAPTER_TITLE_LENGTH_MIN," chars!")},{max:se.k.CHAPTER_TITLE_LENGTH_MAX,message:"Max length ".concat(se.k.CHAPTER_TITLE_LENGTH_MAX," chars!")}],children:(0,b.jsx)(h.Z,{addonBefore:t,placeholder:"Title"})}),(0,b.jsxs)(a.Z,{gutter:16,children:[(0,b.jsx)(l.Z,{children:(0,b.jsx)(C.Z.Item,{name:"win",valuePropName:"checked",children:(0,b.jsxs)(ie,{onChange:function(){},children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.kWN})," ","Victory!"]})})}),(0,b.jsx)(l.Z,{children:(0,b.jsx)(C.Z.Item,{name:"dead",valuePropName:"checked",children:(0,b.jsxs)(ie,{onChange:function(){},value:"Dead ending",children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.QmK})," ","Death"]})})}),(0,b.jsx)(l.Z,{children:(0,b.jsx)(C.Z.Item,{name:"fixed",valuePropName:"checked",children:(0,b.jsxs)(ie,{onChange:function(){},value:"Fixed chapter",disabled:g===se.k.FIRST_CHAPTER_ID,children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.Lad})," ","Is fixed"]})})}),(0,b.jsx)(l.Z,{children:(0,b.jsx)(C.Z.Item,{name:"ready",valuePropName:"checked",children:(0,b.jsxs)(ie,{onChange:function(){},value:"Fixed chapter",children:[(0,b.jsx)(m.G,{className:"faIcon",icon:v.fV7})," ","Is ready"]})})})]}),(0,b.jsx)(C.Z.Item,{name:"content",className:"chapter-editor_textarea",children:(0,b.jsx)(h.Z.TextArea,{placeholder:'Create a new chapter using the "New Chapter" buttons or just start writing.'})}),(0,b.jsx)(C.Z.Item,{children:g?(0,b.jsx)(p.Z,{htmlType:"submit",block:!0,children:"Save"}):(0,b.jsx)(p.Z,{htmlType:"submit",block:!0,children:"Create new"})})]})]})},ve=t(2810),be=t(6015),ge=s.ZP.div(ne||(ne=(0,r.Z)(["\n    // put some styles here\n    height: 50%;\n    padding: 10px;\n    .graph-container {\n        background-color: #222;\n        height: 100%;\n        border: 1px solid #444;\n    }\n"]))),Ze={nodes:[],edges:[]},je={layout:{hierarchical:!1,randomSeed:741},edges:{color:"#FFFFFF",smooth:!0,length:200},nodes:{shape:"box"},height:"100%",width:"100%"},ye=function(){var e=(0,f.C)((function(e){return e.gamebook})),n=e.chapters,t=e.selectedId,i=o.useState(Ze),r=(0,d.Z)(i,2),a=r[0],l=r[1],s=(0,f.T)();o.useEffect((function(){n.map((function(e){return e.id}));var e=n.filter((function(e){return e.id===t})),i=[],r=[];if(e.length>0){var a,o,s;i=[].concat((0,M.Z)(i),[{id:e[0].id,label:"".concat(e[0].chapterNumber,"\n").concat(e[0].title.slice(0,10)),color:"#0050b3",font:{color:"white"}}]),null!==(a=e[0].content)&&void 0!==a&&a.includes("{}")&&(i=[].concat((0,M.Z)(i),[{id:"EMPTY_".concat(e[0].id),label:"{ EMPTY LINK }",color:"#fff1b8"}]),r=[].concat((0,M.Z)(r),[{from:e[0].id,to:"EMPTY_".concat(e[0].id)}]));var c=null===(o=e[0].content)||void 0===o||null===(s=o.match(/(\d+)/g))||void 0===s?void 0:s.map((function(e){return parseInt(e)}));c&&(null===c||void 0===c?void 0:c.length)>0&&(null===c||void 0===c||c.map((function(t){var a,l,o;t>0&&t<=n.length&&(i.push({id:n[t-1].id,label:"".concat(n[t-1].chapterNumber,"\n").concat(n[t-1].title.slice(0,10)),color:"#1890ff"}),r.push({from:e[0].id,to:n[t-1].id})),t>n.length&&(i.push({id:"NO_CHAPTER_".concat(e[0].id),label:"NO CHAPTER",title:"NO CHAPTER",color:"#ff7875"}),r.push({from:e[0].id,to:"NO_CHAPTER_".concat(e[0].id),label:"".concat(t)}));var s,c=null===(a=n[t-1])||void 0===a||null===(l=a.content)||void 0===l||null===(o=l.match(/(\d+)/g))||void 0===o?void 0:o.map((function(e){return parseInt(e)}));c&&c.length>0&&(null===c||void 0===c||c.map((function(e){return e>0&&e<=n.length&&(i.push({id:n[e-1].id,label:"".concat(n[e-1].chapterNumber,"\n").concat(n[e-1].title.slice(0,10)),color:"#bae7ff"}),r.push({from:n[t-1].id,to:n[e-1].id})),e>n.length&&(i.push({id:"NO_CHAPTER_".concat(n[t-1].id),label:"NO CHAPTER",title:"NO CHAPTER",color:"#ff7875"}),r.push({from:n[t-1].id,to:"NO_CHAPTER_".concat(n[t-1].id),label:"".concat(e)})),null})),null!==(s=n[t-1].content)&&void 0!==s&&s.includes("{}")&&(i=[].concat((0,M.Z)(i),[{id:"EMPTY_".concat(n[t-1].id),label:"{ EMPTY LINK }",color:"#fff1b8"}]),r=[].concat((0,M.Z)(r),[{from:n[t-1].id,to:"EMPTY_".concat(n[t-1].id)}])));return null})));var d=i.map((function(e){return e.id}));i=i.filter((function(e,n){var t=e.id;return!d.includes(t,n+1)}))}l({nodes:(0,M.Z)(i),edges:(0,M.Z)(r)})}),[n,t]);var c={select:function(e){var n=e.nodes;e.edges;1===n.length&&s((0,x.kC)(n[0]))}};return(0,b.jsx)(ge,{children:(0,b.jsx)("div",{className:"graph-container",children:(0,b.jsx)(be.Z,{graph:a,options:je,events:c},(0,ve.Z)())})})},ke=t(1668),Ce=s.ZP.div(te||(te=(0,r.Z)(["\n    height: 100vh;\n    .editor-page_container {\n        height: calc(100% - 46px);\n    }\n    .sidebar__tree-container {\n        width: 25%;\n        min-width: 400px;\n        height: 100%;\n        overflow-y: hidden;\n    }\n    .editor-container {\n        padding: 10px;\n        width: 50%;\n        height: 100%;\n    }\n    .graph__tree-container {\n        width: 25%;\n        height: 100%;\n    }\n"]))),Ne=function(e){Object.assign({},e);return(0,b.jsxs)(Ce,{children:[(0,b.jsx)(ke.Z,{}),(0,b.jsxs)(a.Z,{className:"editor-page_container",children:[(0,b.jsx)(l.Z,{className:"sidebar__tree-container",xs:{span:24,order:2},md:{span:12,order:2},lg:{span:10,order:1},xl:{span:6,order:1},children:(0,b.jsx)(k,{})}),(0,b.jsx)(l.Z,{className:"editor-container",xs:{span:24,order:1},md:{span:24,order:1},lg:{span:14,order:2},xl:{span:12,order:2},children:(0,b.jsx)(me,{})}),(0,b.jsx)(l.Z,{className:"graph__tree-container",xs:{span:24,order:3},md:{span:12,order:3},lg:{span:24,order:3},xl:{span:6,order:3},children:(0,b.jsx)(ye,{})})]})]})}},6697:function(e,n,t){t.d(n,{C:function(){return a},T:function(){return r}});var i=t(9434),r=function(){return(0,i.I0)()},a=i.v9}}]);
//# sourceMappingURL=131.33655e59.chunk.js.map