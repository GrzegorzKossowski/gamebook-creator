(self.webpackChunkgamebook_creator=self.webpackChunkgamebook_creator||[]).push([[997],{4997:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return he}});var r=n(9439),i=n(168),o=n(2791),a=n(6031),s=n(9964),u=n(6106),l=n(914),f=n(7462),c=n(4942),d=n(5671),p=n(3144),h=n(136),v=n(7277),g=n(1002),m=n(1694),x=n.n(m),y=n(1818),b=n(8829),w=n(3785),P=n(3433),T=n(5314);function j(){return function(e,t,n){var r=n.value,i=!1;return{configurable:!0,get:function(){if(i||this===e.prototype||this.hasOwnProperty(t))return r;var n=function(e){var t,n=function(n){return function(){t=null,e.apply(void 0,(0,P.Z)(n))}},r=function(){if(null==t){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=(0,T.Z)(n(r))}};return r.cancel=function(){T.Z.cancel(t),t=null},r}(r.bind(this));return i=!0,Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),i=!1,n}}}}var E=n(1585);function Z(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function N(e,t,n){if(void 0!==n&&t.top>e.top-n)return n+t.top}function O(e,t,n){if(void 0!==n&&t.bottom<e.bottom+n)return n+(window.innerHeight-t.bottom)}var _=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],A=[];function k(e,t){if(e){var n=A.find((function(t){return t.target===e}));n?n.affixList.push(t):(n={target:e,affixList:[t],eventHandlers:{}},A.push(n),_.forEach((function(t){n.eventHandlers[t]=(0,E.Z)(e,t,(function(){n.affixList.forEach((function(e){e.lazyUpdatePosition()}))}))})))}}function C(e){var t=A.find((function(t){var n=t.affixList.some((function(t){return t===e}));return n&&(t.affixList=t.affixList.filter((function(t){return t!==e}))),n}));t&&0===t.affixList.length&&(A=A.filter((function(e){return e!==t})),_.forEach((function(e){var n=t.eventHandlers[e];n&&n.remove&&n.remove()})))}var S,R=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":(0,g.Z)(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};function B(){return"undefined"!==typeof window?window:null}!function(e){e[e.None=0]="None",e[e.Prepare=1]="Prepare"}(S||(S={}));var L=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(){var e;return(0,d.Z)(this,n),(e=t.apply(this,arguments)).state={status:S.None,lastAffix:!1,prevTarget:null},e.getOffsetTop=function(){var t=e.props,n=t.offsetBottom,r=t.offsetTop;return void 0===n&&void 0===r?0:r},e.getOffsetBottom=function(){return e.props.offsetBottom},e.savePlaceholderNode=function(t){e.placeholderNode=t},e.saveFixedNode=function(t){e.fixedNode=t},e.measure=function(){var t=e.state,n=t.status,r=t.lastAffix,i=e.props.onChange,o=e.getTargetFunc();if(n===S.Prepare&&e.fixedNode&&e.placeholderNode&&o){var a=e.getOffsetTop(),s=e.getOffsetBottom(),u=o();if(u){var l={status:S.None},f=Z(u),c=Z(e.placeholderNode),d=N(c,f,a),p=O(c,f,s);void 0!==d?(l.affixStyle={position:"fixed",top:d,width:c.width,height:c.height},l.placeholderStyle={width:c.width,height:c.height}):void 0!==p&&(l.affixStyle={position:"fixed",bottom:p,width:c.width,height:c.height},l.placeholderStyle={width:c.width,height:c.height}),l.lastAffix=!!l.affixStyle,i&&r!==l.lastAffix&&i(l.lastAffix),e.setState(l)}}},e.prepareMeasure=function(){e.setState({status:S.Prepare,affixStyle:void 0,placeholderStyle:void 0})},e}return(0,p.Z)(n,[{key:"getTargetFunc",value:function(){var e=this.context.getTargetContainer,t=this.props.target;return void 0!==t?t:e||B}},{key:"componentDidMount",value:function(){var e=this,t=this.getTargetFunc();t&&(this.timeout=setTimeout((function(){k(t(),e),e.updatePosition()})))}},{key:"componentDidUpdate",value:function(e){var t=this.state.prevTarget,n=this.getTargetFunc(),r=(null===n||void 0===n?void 0:n())||null;t!==r&&(C(this),r&&(k(r,this),this.updatePosition()),this.setState({prevTarget:r})),e.offsetTop===this.props.offsetTop&&e.offsetBottom===this.props.offsetBottom||this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),C(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"updatePosition",value:function(){this.prepareMeasure()}},{key:"lazyUpdatePosition",value:function(){var e=this.getTargetFunc(),t=this.state.affixStyle;if(e&&t){var n=this.getOffsetTop(),r=this.getOffsetBottom(),i=e();if(i&&this.placeholderNode){var o=Z(i),a=Z(this.placeholderNode),s=N(a,o,n),u=O(a,o,r);if(void 0!==s&&t.top===s||void 0!==u&&t.bottom===u)return}}this.prepareMeasure()}},{key:"render",value:function(){var e=this,t=this.state,n=t.affixStyle,r=t.placeholderStyle,i=this.props,a=i.affixPrefixCls,s=i.children,u=x()((0,c.Z)({},a,!!n)),l=(0,y.Z)(this.props,["prefixCls","offsetTop","offsetBottom","target","onChange","affixPrefixCls"]);return o.createElement(b.Z,{onResize:function(){e.updatePosition()}},o.createElement("div",(0,f.Z)({},l,{ref:this.savePlaceholderNode}),n&&o.createElement("div",{style:r,"aria-hidden":"true"}),o.createElement("div",{className:u,ref:this.saveFixedNode,style:n},o.createElement(b.Z,{onResize:function(){e.updatePosition()}},s))))}}]),n}(o.Component);L.contextType=w.E_,R([j()],L.prototype,"updatePosition",null),R([j()],L.prototype,"lazyUpdatePosition",null);var z,I=o.forwardRef((function(e,t){var n=e.prefixCls,r=(0,o.useContext(w.E_).getPrefixCls)("affix",n),i=(0,f.Z)((0,f.Z)({},e),{affixPrefixCls:r});return o.createElement(L,(0,f.Z)({},i,{ref:t}))})),U=n(7309),F=n(6060),H=n(4483),M=n(3174),K=n(6871),D=n(184),G=a.ZP.div(z||(z=(0,i.Z)(["\n    // put some styles here\n"]))),V=[{label:"Editor",key:"goToEditor",disabled:!1,icon:(0,D.jsx)(H.G,{icon:M.A35})}],$=function(){var e=(0,K.s0)();return(0,D.jsx)(G,{children:(0,D.jsx)(F.Z,{onClick:function(t){if("goToEditor"===t.key)e("/editor")},mode:"horizontal",items:V})})},W=n(6697),X=n(844),Y=n.n(X),q=n(3504),J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},J.apply(this,arguments)};var Q="",ee=null,te=null,ne=null;function re(){Q="",null!==ee&&ee.disconnect(),null!==te&&(window.clearTimeout(te),te=null)}function ie(e){return["BUTTON","INPUT","SELECT","TEXTAREA"].includes(e.tagName)&&!e.hasAttribute("disabled")||["A","AREA"].includes(e.tagName)&&e.hasAttribute("href")}function oe(){var e=null;if("#"===Q)e=document.body;else{var t=Q.replace("#","");null===(e=document.getElementById(t))&&"#top"===Q&&(e=document.body)}if(null!==e){ne(e);var n=e.getAttribute("tabindex");return null!==n||ie(e)||e.setAttribute("tabindex",-1),e.focus({preventScroll:!0}),null!==n||ie(e)||(e.blur(),e.removeAttribute("tabindex")),re(),!0}return!1}function ae(e){return o.forwardRef((function(t,n){var r="";"string"===typeof t.to&&t.to.includes("#")?r="#"+t.to.split("#").slice(1).join("#"):"object"===typeof t.to&&"string"===typeof t.to.hash&&(r=t.to.hash);var i={};e===q.OL&&(i.isActive=function(e,t){return e&&e.isExact&&t.hash===r});var a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["scroll","smooth","timeout","elementId"]);return o.createElement(e,J({},i,a,{onClick:function(e){var n;re(),Q=t.elementId?"#"+t.elementId:r,t.onClick&&t.onClick(e),""===Q||e.defaultPrevented||0!==e.button||t.target&&"_self"!==t.target||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||(ne=t.scroll||function(e){return t.smooth?e.scrollIntoView({behavior:"smooth"}):e.scrollIntoView()},n=t.timeout,window.setTimeout((function(){!1===oe()&&(null===ee&&(ee=new MutationObserver(oe)),ee.observe(document,{attributes:!0,childList:!0,subtree:!0}),te=window.setTimeout((function(){re()}),n||1e4))}),0))},ref:n}),t.children)}))}var se,ue=ae(q.rU),le=(ae(q.OL),n(2810)),fe=a.ZP.div(se||(se=(0,i.Z)(["\n    // put some styles here\n    .preview {\n        &__container {\n            padding: 2rem 0;\n            text-align: justify;\n        }\n        &__title {\n            text-align: center;\n        }\n        &__subtitle {\n            text-align: center;\n            margin-bottom: 4rem;\n        }\n        &__paragraph {\n            font-size: 1.2rem;\n            padding-bottom: 2rem;\n        }\n    }\n"]))),ce=s.Z.Title,de=s.Z.Text,pe=s.Z.Paragraph,he=function(){var e=(0,W.C)((function(e){return e.gamebook})),t=e.authorName,n=e.gamebookTitle,i=e.chapters,a=o.useState([]),s=(0,r.Z)(a,2),f=s[0],c=s[1];return o.useEffect((function(){c((function(){return i.map((function(e){return e.id}))}))}),[]),(0,D.jsxs)(fe,{children:[(0,D.jsx)($,{}),(0,D.jsx)(u.Z,{justify:"center",className:"preview__container",id:"mainRow",children:(0,D.jsxs)(l.Z,{xs:22,sm:22,md:22,lg:16,xl:12,xxl:10,children:[(0,D.jsx)(ce,{level:2,className:"preview__title",children:n}),(0,D.jsxs)(ce,{level:4,className:"preview__subtitle",children:["by ",t]}),i&&i.map((function(e){return(0,D.jsxs)(pe,{className:"preview__paragraph",id:e.id,children:[e.chapterNumber&&(0,D.jsx)(ce,{level:4,className:"preview__title",children:e.chapterNumber}),e.title&&(0,D.jsx)(ce,{level:4,className:"preview__title",children:e.title}),(0,D.jsx)(de,{children:Y()(null===e||void 0===e?void 0:e.content,/\{(\d+)\}/g,(function(e,t){var n=f[parseInt(e)-1];return n?(0,D.jsxs)("span",{children:["[",(0,D.jsx)(ue,{to:"#".concat(n),children:e}),"]"]},(0,le.Z)()):(0,D.jsxs)("span",{children:["[",e,"]"]},(0,le.Z)())}))})]},e.id)}))]})}),(0,D.jsx)(I,{style:{position:"fixed",bottom:50,right:50},children:(0,D.jsx)(ue,{to:"#mainRow",children:(0,D.jsx)(U.Z,{size:"large",type:"primary",shape:"circle",children:(0,D.jsx)(H.G,{icon:M.UAH})})})})]})}},6697:function(e,t,n){"use strict";n.d(t,{C:function(){return o},T:function(){return i}});var r=n(9434),i=function(){return(0,r.I0)()},o=r.v9},844:function(e){var t=function(e){return"string"===typeof e};function n(e,n,r){var i=0,o=0;if(""===e)return e;if(!e||!t(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var a=n;(function(e){return e instanceof RegExp})(a)||(a=new RegExp("("+function(e){var t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source);return e&&n.test(e)?e.replace(t,"\\$&"):e}(a)+")","gi"));for(var s=e.split(a),u=1,l=s.length;u<l;u+=2)void 0!==s[u]&&void 0!==s[u-1]?(o=s[u].length,i+=s[u-1].length,s[u]=r(s[u],u,i),i+=o):console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");return s}e.exports=function(e,r,i){return Array.isArray(e)||(e=[e]),function(e){var t=[];return e.forEach((function(e){Array.isArray(e)?t=t.concat(e):t.push(e)})),t}(e.map((function(e){return t(e)?n(e,r,i):e})))}}}]);
//# sourceMappingURL=997.df2c5d58.chunk.js.map